digraph <init> {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {2091885449}" -> "snapshotSerializers := @parameter0: java.util.Map {1358094632}";
"snapshotSerializers := @parameter0: java.util.Map {1358094632}" -> "primarySnapshotSuffix := @parameter1: java.lang.String {593421596}";
"primarySnapshotSuffix := @parameter1: java.lang.String {593421596}" -> "newPrevalentSystem := @parameter2: java.lang.Object {1108414677}";
"newPrevalentSystem := @parameter2: java.lang.Object {1108414677}" -> "directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1372712866}";
"directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1372712866}" -> "journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {1947809238}";
"journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {1947809238}" -> "specialinvoke this.<java.lang.Object: void <init>()>() {760249873}";
"specialinvoke this.<java.lang.Object: void <init>()>() {760249873}" -> "$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {1641781163}";
"$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {1641781163}" -> "iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {810167126}";
"iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {810167126}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1247923956}";
"$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1247923956}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1538163678}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1538163678}" -> "if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1361583301}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1361583301}" -> "$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {828929857}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1361583301}" -> "$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {659447899}";
"$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {828929857}" -> "suffix = (java.lang.String) $r1 {413738212}";
"suffix = (java.lang.String) $r1 {413738212}" -> "staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1331284929}";
"staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1331284929}" -> "goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {77215607}";
"goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {77215607}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1247923956}";
"$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {659447899}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {806744812}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {806744812}" -> "if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1604015163}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1604015163}" -> "$r2 = new java.lang.IllegalArgumentException {1281406411}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1604015163}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1889678207}";
"$r2 = new java.lang.IllegalArgumentException {1281406411}" -> "$r3 = new java.lang.StringBuilder {962505108}";
"$r3 = new java.lang.StringBuilder {962505108}" -> "specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1671284614}";
"specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1671284614}" -> "$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {332051804}";
"$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {332051804}" -> "$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {631078323}";
"$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {631078323}" -> "$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1380589180}";
"$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1380589180}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {1940708847}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {1940708847}" -> "specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1033000652}";
"specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1033000652}" -> "throw $r2 {1212451839}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1889678207}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1054423721}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1054423721}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {1854166823}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {1854166823}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1221703482}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1221703482}" -> "virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1334238639}";
"virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1334238639}" -> "$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1674157057}";
"$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1674157057}" -> "latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {1611573028}";
"latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {1611573028}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1067727542}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1067727542}" -> "if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1293366723}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1293366723}" -> "$l0 = 0L {539175135}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1293366723}" -> "$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1316893254}";
"$l0 = 0L {539175135}" -> "goto [?= recoveredVersion = $l0] {889293944}";
"goto [?= recoveredVersion = $l0] {889293944}" -> "recoveredVersion = $l0 {1316601414}";
"$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1316893254}" -> "recoveredVersion = $l0 {1316601414}";
"recoveredVersion = $l0 {1316601414}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {259947647}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {259947647}" -> "if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1454451038}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1454451038}" -> "$r10 = newPrevalentSystem {897895328}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1454451038}" -> "$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {95300701}";
"$r10 = newPrevalentSystem {897895328}" -> "goto [?= recoveredPrevalentSystem = $r10] {906811608}";
"goto [?= recoveredPrevalentSystem = $r10] {906811608}" -> "recoveredPrevalentSystem = $r10 {470229476}";
"$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {95300701}" -> "recoveredPrevalentSystem = $r10 {470229476}";
"recoveredPrevalentSystem = $r10 {470229476}" -> "$r11 = new org.prevayler.implementation.PrevalentSystemGuard {1594572829}";
"$r11 = new org.prevayler.implementation.PrevalentSystemGuard {1594572829}" -> "specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {691060832}";
"specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {691060832}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {27920313}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {27920313}" -> "return {2144706207}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {806744812}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {259947647}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1538163678}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1067727542}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph readSnapshot {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1699487722}" -> "snapshotFile := @parameter0: java.io.File {2138268616}";
"snapshotFile := @parameter0: java.io.File {2138268616}" -> "$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1978441829}";
"$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1978441829}" -> "$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {603966342}";
"$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {603966342}" -> "$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {1065900060}";
"$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {1065900060}" -> "$i1 = $i0 + 1 {1409307602}";
"$i1 = $i0 + 1 {1409307602}" -> "suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {658176690}";
"suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {658176690}" -> "$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1133682621}";
"$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1133682621}" -> "$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1401413060}";
"$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1401413060}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {563300002}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {563300002}" -> "if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {931900515}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {931900515}" -> "$r3 = new java.io.IOException {1622385240}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {931900515}" -> "$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1858042362}";
"$r3 = new java.io.IOException {1622385240}" -> "$r4 = new java.lang.StringBuilder {1823307161}";
"$r4 = new java.lang.StringBuilder {1823307161}" -> "specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {899155078}";
"specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {899155078}" -> "$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {1307102565}";
"$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {1307102565}" -> "$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {692476347}";
"$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {692476347}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {455481223}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {455481223}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {188643916}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {188643916}" -> "$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {691177942}";
"$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {691177942}" -> "$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {42154328}";
"$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {42154328}" -> "$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1641901569}";
"$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1641901569}" -> "$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {604553914}";
"$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {604553914}" -> "$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1062893210}";
"$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1062893210}" -> "specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {897432086}";
"specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {897432086}" -> "throw $r3 {1623339553}";
"$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1858042362}" -> "$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {1198046435}";
"$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {1198046435}" -> "serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {1499787171}";
"serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {1499787171}" -> "$r16 = new java.io.FileInputStream {1533665224}";
"$r16 = new java.io.FileInputStream {1533665224}" -> "specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {506879258}";
"specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {506879258}" -> "in = $r16 {1437691777}";
"in = $r16 {1437691777}" -> "l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {1640064265}";
"l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {1640064265}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {74260282}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {74260282}" -> "return l5 {1953427153}";
"$r17 := @caughtexception {922727274}" -> "l6 = $r17 {2119184163}";
"l6 = $r17 {2119184163}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {169349695}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {169349695}" -> "throw l6 {604239103}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {563300002}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph recoveredPrevalentSystem {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1756835297}" -> "$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {1129092343}";
"$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {1129092343}" -> "return $r0 {314925402}";
}


