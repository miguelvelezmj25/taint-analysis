digraph <init> {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {447133252}" -> "snapshotSerializers := @parameter0: java.util.Map {702439898}";
"snapshotSerializers := @parameter0: java.util.Map {702439898}" -> "primarySnapshotSuffix := @parameter1: java.lang.String {308352458}";
"primarySnapshotSuffix := @parameter1: java.lang.String {308352458}" -> "newPrevalentSystem := @parameter2: java.lang.Object {765854848}";
"newPrevalentSystem := @parameter2: java.lang.Object {765854848}" -> "directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1581597714}";
"directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1581597714}" -> "journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {1463431071}";
"journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {1463431071}" -> "specialinvoke this.<java.lang.Object: void <init>()>() {101313418}";
"specialinvoke this.<java.lang.Object: void <init>()>() {101313418}" -> "$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {1343982512}";
"$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {1343982512}" -> "iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {2071211340}";
"iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {2071211340}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1604684696}";
"$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1604684696}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1808521676}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1808521676}" -> "if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1501835101}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1501835101}" -> "$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {117867066}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1501835101}" -> "$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1316306862}";
"$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {117867066}" -> "suffix = (java.lang.String) $r1 {217180920}";
"suffix = (java.lang.String) $r1 {217180920}" -> "staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {718069125}";
"staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {718069125}" -> "goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {1990360521}";
"goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {1990360521}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1604684696}";
"$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1316306862}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {319515493}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {319515493}" -> "if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {80107576}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {80107576}" -> "$r2 = new java.lang.IllegalArgumentException {1740693485}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {80107576}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {315508670}";
"$r2 = new java.lang.IllegalArgumentException {1740693485}" -> "$r3 = new java.lang.StringBuilder {2140326283}";
"$r3 = new java.lang.StringBuilder {2140326283}" -> "specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {120269636}";
"specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {120269636}" -> "$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {308089357}";
"$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {308089357}" -> "$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {41198839}";
"$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {41198839}" -> "$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1979123489}";
"$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1979123489}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {2005378785}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {2005378785}" -> "specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1349773306}";
"specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1349773306}" -> "throw $r2 {1521803547}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {315508670}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1963630304}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1963630304}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {703748992}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {703748992}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1406047001}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1406047001}" -> "virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1517855153}";
"virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1517855153}" -> "$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {416595685}";
"$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {416595685}" -> "latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {794041354}";
"latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {794041354}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1739836260}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1739836260}" -> "if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {16303663}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {16303663}" -> "$l0 = 0L {1597387906}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {16303663}" -> "$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1374401257}";
"$l0 = 0L {1597387906}" -> "goto [?= recoveredVersion = $l0] {1351468834}";
"goto [?= recoveredVersion = $l0] {1351468834}" -> "recoveredVersion = $l0 {18709109}";
"$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1374401257}" -> "recoveredVersion = $l0 {18709109}";
"recoveredVersion = $l0 {18709109}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {2053611519}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {2053611519}" -> "if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1006945592}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1006945592}" -> "$r10 = newPrevalentSystem {1005008964}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1006945592}" -> "$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1528565576}";
"$r10 = newPrevalentSystem {1005008964}" -> "goto [?= recoveredPrevalentSystem = $r10] {1371743135}";
"goto [?= recoveredPrevalentSystem = $r10] {1371743135}" -> "recoveredPrevalentSystem = $r10 {820978816}";
"$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1528565576}" -> "recoveredPrevalentSystem = $r10 {820978816}";
"recoveredPrevalentSystem = $r10 {820978816}" -> "$r11 = new org.prevayler.implementation.PrevalentSystemGuard {197185035}";
"$r11 = new org.prevayler.implementation.PrevalentSystemGuard {197185035}" -> "specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {167742404}";
"specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {167742404}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {1630296112}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {1630296112}" -> "return {1609336591}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1808521676}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {319515493}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {2053611519}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1739836260}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph readSnapshot {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {445276769}" -> "snapshotFile := @parameter0: java.io.File {283674034}";
"snapshotFile := @parameter0: java.io.File {283674034}" -> "$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {307662768}";
"$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {307662768}" -> "$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {142625490}";
"$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {142625490}" -> "$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {132448993}";
"$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {132448993}" -> "$i1 = $i0 + 1 {1217035848}";
"$i1 = $i0 + 1 {1217035848}" -> "suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {321153388}";
"suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {321153388}" -> "$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1514046650}";
"$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1514046650}" -> "$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {2017195090}";
"$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {2017195090}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {427048912}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {427048912}" -> "if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1227262694}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1227262694}" -> "$r3 = new java.io.IOException {1737739308}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1227262694}" -> "$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1442201650}";
"$r3 = new java.io.IOException {1737739308}" -> "$r4 = new java.lang.StringBuilder {746373752}";
"$r4 = new java.lang.StringBuilder {746373752}" -> "specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {852648114}";
"specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {852648114}" -> "$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {691262819}";
"$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {691262819}" -> "$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1534761776}";
"$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1534761776}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {979867733}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {979867733}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {40133429}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {40133429}" -> "$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {491751483}";
"$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {491751483}" -> "$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {468455159}";
"$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {468455159}" -> "$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1346007631}";
"$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1346007631}" -> "$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {277454577}";
"$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {277454577}" -> "$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1810473377}";
"$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1810473377}" -> "specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {1757548185}";
"specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {1757548185}" -> "throw $r3 {798391881}";
"$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1442201650}" -> "$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {834698523}";
"$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {834698523}" -> "serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {1764708845}";
"serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {1764708845}" -> "$r16 = new java.io.FileInputStream {1538638198}";
"$r16 = new java.io.FileInputStream {1538638198}" -> "specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {783089735}";
"specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {783089735}" -> "in = $r16 {330537318}";
"in = $r16 {330537318}" -> "l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {266682238}";
"l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {266682238}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {406218595}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {406218595}" -> "return l5 {1675051923}";
"$r17 := @caughtexception {1427968069}" -> "l6 = $r17 {203480074}";
"l6 = $r17 {203480074}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {1815122463}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {1815122463}" -> "throw l6 {1958320061}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {427048912}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph recoveredPrevalentSystem {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {512717908}" -> "$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {1554195293}";
"$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {1554195293}" -> "return $r0 {963367241}";
}


