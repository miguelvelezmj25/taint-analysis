digraph <init> {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1506537942}" -> "snapshotSerializers := @parameter0: java.util.Map {483244677}";
"snapshotSerializers := @parameter0: java.util.Map {483244677}" -> "primarySnapshotSuffix := @parameter1: java.lang.String {330354713}";
"primarySnapshotSuffix := @parameter1: java.lang.String {330354713}" -> "newPrevalentSystem := @parameter2: java.lang.Object {1385038469}";
"newPrevalentSystem := @parameter2: java.lang.Object {1385038469}" -> "directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1281535755}";
"directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1281535755}" -> "journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {2042947924}";
"journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {2042947924}" -> "specialinvoke this.<java.lang.Object: void <init>()>() {2090180704}";
"specialinvoke this.<java.lang.Object: void <init>()>() {2090180704}" -> "$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {8541609}";
"$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {8541609}" -> "iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1014987970}";
"iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1014987970}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1419608974}";
"$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1419608974}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1602321011}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1602321011}" -> "if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1186941294}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1186941294}" -> "$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {1037051987}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1186941294}" -> "$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {890567885}";
"$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {1037051987}" -> "suffix = (java.lang.String) $r1 {896326225}";
"suffix = (java.lang.String) $r1 {896326225}" -> "staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1174968158}";
"staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1174968158}" -> "goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {1931431313}";
"goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {1931431313}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1419608974}";
"$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {890567885}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {1553789862}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {1553789862}" -> "if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {2937001}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {2937001}" -> "$r2 = new java.lang.IllegalArgumentException {1246219893}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {2937001}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {780523249}";
"$r2 = new java.lang.IllegalArgumentException {1246219893}" -> "$r3 = new java.lang.StringBuilder {1889597920}";
"$r3 = new java.lang.StringBuilder {1889597920}" -> "specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {363317947}";
"specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {363317947}" -> "$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {1676738619}";
"$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {1676738619}" -> "$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {858145288}";
"$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {858145288}" -> "$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1080707081}";
"$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1080707081}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {629007339}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {629007339}" -> "specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {608879438}";
"specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {608879438}" -> "throw $r2 {70766486}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {780523249}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {411852067}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {411852067}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {19724176}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {19724176}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {317761778}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {317761778}" -> "virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {54619709}";
"virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {54619709}" -> "$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {6277016}";
"$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {6277016}" -> "latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {1180965966}";
"latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {1180965966}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {593071563}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {593071563}" -> "if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1437162203}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1437162203}" -> "$l0 = 0L {1974395751}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1437162203}" -> "$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {2133067085}";
"$l0 = 0L {1974395751}" -> "goto [?= recoveredVersion = $l0] {323885040}";
"goto [?= recoveredVersion = $l0] {323885040}" -> "recoveredVersion = $l0 {503389648}";
"$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {2133067085}" -> "recoveredVersion = $l0 {503389648}";
"recoveredVersion = $l0 {503389648}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {269238470}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {269238470}" -> "if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {108201500}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {108201500}" -> "$r10 = newPrevalentSystem {1613134107}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {108201500}" -> "$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1898384436}";
"$r10 = newPrevalentSystem {1613134107}" -> "goto [?= recoveredPrevalentSystem = $r10] {1985939282}";
"goto [?= recoveredPrevalentSystem = $r10] {1985939282}" -> "recoveredPrevalentSystem = $r10 {2082801822}";
"$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1898384436}" -> "recoveredPrevalentSystem = $r10 {2082801822}";
"recoveredPrevalentSystem = $r10 {2082801822}" -> "$r11 = new org.prevayler.implementation.PrevalentSystemGuard {1174304622}";
"$r11 = new org.prevayler.implementation.PrevalentSystemGuard {1174304622}" -> "specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {394050138}";
"specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {394050138}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {1801891094}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {1801891094}" -> "return {1797063771}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {593071563}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1602321011}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {1553789862}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {269238470}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph readSnapshot {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {300161372}" -> "snapshotFile := @parameter0: java.io.File {885332892}";
"snapshotFile := @parameter0: java.io.File {885332892}" -> "$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {920091270}";
"$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {920091270}" -> "$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1710012091}";
"$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1710012091}" -> "$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {467149560}";
"$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {467149560}" -> "$i1 = $i0 + 1 {1677904463}";
"$i1 = $i0 + 1 {1677904463}" -> "suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {62592015}";
"suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {62592015}" -> "$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1318438046}";
"$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1318438046}" -> "$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1495096827}";
"$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1495096827}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {275304406}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {275304406}" -> "if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1737373075}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1737373075}" -> "$r3 = new java.io.IOException {132103368}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1737373075}" -> "$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {2069174241}";
"$r3 = new java.io.IOException {132103368}" -> "$r4 = new java.lang.StringBuilder {1602121643}";
"$r4 = new java.lang.StringBuilder {1602121643}" -> "specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {654844369}";
"specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {654844369}" -> "$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {354986649}";
"$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {354986649}" -> "$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1876989252}";
"$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1876989252}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {974777645}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {974777645}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {26482226}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {26482226}" -> "$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {161615863}";
"$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {161615863}" -> "$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {2082990955}";
"$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {2082990955}" -> "$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {963881254}";
"$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {963881254}" -> "$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {20145394}";
"$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {20145394}" -> "$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1108130572}";
"$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1108130572}" -> "specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {1720844530}";
"specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {1720844530}" -> "throw $r3 {1177090929}";
"$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {2069174241}" -> "$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {205818957}";
"$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {205818957}" -> "serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {240010945}";
"serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {240010945}" -> "$r16 = new java.io.FileInputStream {641762721}";
"$r16 = new java.io.FileInputStream {641762721}" -> "specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {1177437238}";
"specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {1177437238}" -> "in = $r16 {307665315}";
"in = $r16 {307665315}" -> "l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {798705312}";
"l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {798705312}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {876442078}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {876442078}" -> "return l5 {1350051609}";
"$r17 := @caughtexception {691152380}" -> "l6 = $r17 {1535293697}";
"l6 = $r17 {1535293697}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {1905359831}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {1905359831}" -> "throw l6 {1330982207}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {275304406}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph recoveredPrevalentSystem {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {28770382}" -> "$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {677383601}";
"$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {677383601}" -> "return $r0 {300735875}";
}


