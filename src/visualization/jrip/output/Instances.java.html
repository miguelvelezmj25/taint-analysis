<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Instances.java</title>
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700" rel="stylesheet">
</head>
<body>

<div class="container">
    <div id="code_area" class="container_0">
<div>1&emsp;&emsp;/*</div>
<div>2&emsp;&emsp;&nbsp; *   This program is free software: you can redistribute it and/or modify</div>
<div>3&emsp;&emsp;&nbsp; *   it under the terms of the GNU General Public License as published by</div>
<div>4&emsp;&emsp;&nbsp; *   the Free Software Foundation, either version 3 of the License, or</div>
<div>5&emsp;&emsp;&nbsp; *   (at your option) any later version.</div>
<div>6&emsp;&emsp;&nbsp; *</div>
<div>7&emsp;&emsp;&nbsp; *   This program is distributed in the hope that it will be useful,</div>
<div>8&emsp;&emsp;&nbsp; *   but WITHOUT ANY WARRANTY; without even the implied warranty of</div>
<div>9&emsp;&emsp;&nbsp; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</div>
<div>10&emsp;&emsp;&nbsp; *   GNU General Public License for more details.</div>
<div>11&emsp;&emsp;&nbsp; *</div>
<div>12&emsp;&emsp;&nbsp; *   You should have received a copy of the GNU General Public License</div>
<div>13&emsp;&emsp;&nbsp; *   along with this program.  If not, see &#60;http://www.gnu.org/licenses/>.</div>
<div>14&emsp;&emsp;&nbsp; */</div>
<div>15&emsp;&emsp;</div>
<div>16&emsp;&emsp;/*</div>
<div>17&emsp;&emsp;&nbsp; *    Instances.java</div>
<div>18&emsp;&emsp;&nbsp; *    Copyright (C) 1999-2012 University of Waikato, Hamilton, New Zealand</div>
<div>19&emsp;&emsp;&nbsp; *</div>
<div>20&emsp;&emsp;&nbsp; */</div>
<div>21&emsp;&emsp;</div>
<div>22&emsp;&emsp;package weka.core;</div>
<div>23&emsp;&emsp;</div>
<div>24&emsp;&emsp;import java.io.FileReader;</div>
<div>25&emsp;&emsp;import java.io.IOException;</div>
<div>26&emsp;&emsp;import java.io.Reader;</div>
<div>27&emsp;&emsp;import java.io.Serializable;</div>
<div>28&emsp;&emsp;import java.util.AbstractList;</div>
<div>29&emsp;&emsp;import java.util.ArrayList;</div>
<div>30&emsp;&emsp;import java.util.Enumeration;</div>
<div>31&emsp;&emsp;import java.util.HashMap;</div>
<div>32&emsp;&emsp;import java.util.HashSet;</div>
<div>33&emsp;&emsp;import java.util.List;</div>
<div>34&emsp;&emsp;import java.util.Map.Entry;</div>
<div>35&emsp;&emsp;import java.util.Random;</div>
<div>36&emsp;&emsp;</div>
<div>37&emsp;&emsp;import weka.core.converters.ArffLoader.ArffReader;</div>
<div>38&emsp;&emsp;import weka.core.converters.ConverterUtils.DataSource;</div>
<div>39&emsp;&emsp;</div>
<div>40&emsp;&emsp;/**</div>
<div>41&emsp;&emsp;&nbsp; * Class for handling an ordered set of weighted instances.</div>
<div>42&emsp;&emsp;&nbsp; * &#60;p></div>
<div>43&emsp;&emsp;&nbsp; * </div>
<div>44&emsp;&emsp;&nbsp; * Typical usage:</div>
<div>45&emsp;&emsp;&nbsp; * &#60;p></div>
<div>46&emsp;&emsp;&nbsp; * </div>
<div>47&emsp;&emsp;&nbsp; * &#60;pre></div>
<div>48&emsp;&emsp;&nbsp; * import weka.core.converters.ConverterUtils.DataSource;</div>
<div>49&emsp;&emsp;&nbsp; * ...</div>
<div>50&emsp;&emsp;&nbsp; * </div>
<div>51&emsp;&emsp;&nbsp; * // Read all the instances in the file (ARFF, CSV, XRFF, ...)</div>
<div>52&emsp;&emsp;&nbsp; * DataSource source = new DataSource(filename);</div>
<div>53&emsp;&emsp;&nbsp; * Instances instances = source.getDataSet();</div>
<div>54&emsp;&emsp;&nbsp; * </div>
<div>55&emsp;&emsp;&nbsp; * // Make the last attribute be the class</div>
<div>56&emsp;&emsp;&nbsp; * instances.setClassIndex(instances.numAttributes() - 1);</div>
<div>57&emsp;&emsp;&nbsp; * </div>
<div>58&emsp;&emsp;&nbsp; * // Print header and instances.</div>
<div>59&emsp;&emsp;&nbsp; * System.out.println("\nDataset:\n");</div>
<div>60&emsp;&emsp;&nbsp; * System.out.println(instances);</div>
<div>61&emsp;&emsp;&nbsp; * </div>
<div>62&emsp;&emsp;&nbsp; * ...</div>
<div>63&emsp;&emsp;&nbsp; * &#60;/pre></div>
<div>64&emsp;&emsp;&nbsp; * &#60;p></div>
<div>65&emsp;&emsp;&nbsp; * </div>
<div>66&emsp;&emsp;&nbsp; * All methods that change a set of instances are safe, ie. a change of a set of</div>
<div>67&emsp;&emsp;&nbsp; * instances does not affect any other sets of instances. All methods that</div>
<div>68&emsp;&emsp;&nbsp; * change a datasets's attribute information clone the dataset before it is</div>
<div>69&emsp;&emsp;&nbsp; * changed.</div>
<div>70&emsp;&emsp;&nbsp; * </div>
<div>71&emsp;&emsp;&nbsp; * @author Eibe Frank (eibe@cs.waikato.ac.nz)</div>
<div>72&emsp;&emsp;&nbsp; * @author Len Trigg (trigg@cs.waikato.ac.nz)</div>
<div>73&emsp;&emsp;&nbsp; * @author FracPete (fracpete at waikato dot ac dot nz)</div>
<div>74&emsp;&emsp;&nbsp; * @version $Revision: 12446 $</div>
<div>75&emsp;&emsp;&nbsp; */</div>
<div>76&emsp;&emsp;public class Instances extends AbstractList&#60;Instance> implements Serializable,</div>
<div>77&emsp;&emsp;RevisionHandler {</div>
<div>78&emsp;&emsp;</div>
<div>79&emsp;&emsp;&nbsp;&nbsp;  /** for serialization */</div>
<div>80&emsp;&emsp;&nbsp;&nbsp;  static final long serialVersionUID = -19412345060742748L;</div>
<div>81&emsp;&emsp;</div>
<div>82&emsp;&emsp;&nbsp;&nbsp;  /** The filename extension that should be used for arff files */</div>
<div>83&emsp;&emsp;&nbsp;&nbsp;  public final static String FILE_EXTENSION = ".arff";</div>
<div>84&emsp;&emsp;</div>
<div>85&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>86&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * The filename extension that should be used for bin. serialized instances</div>
<div>87&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * files</div>
<div>88&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>89&emsp;&emsp;&nbsp;&nbsp;  public final static String SERIALIZED_OBJ_FILE_EXTENSION = ".bsi";</div>
<div>90&emsp;&emsp;</div>
<div>91&emsp;&emsp;&nbsp;&nbsp;  /** The keyword used to denote the start of an arff header */</div>
<div>92&emsp;&emsp;&nbsp;&nbsp;  public final static String ARFF_RELATION = "@relation";</div>
<div>93&emsp;&emsp;</div>
<div>94&emsp;&emsp;&nbsp;&nbsp;  /** The keyword used to denote the start of the arff data section */</div>
<div>95&emsp;&emsp;&nbsp;&nbsp;  public final static String ARFF_DATA = "@data";</div>
<div>96&emsp;&emsp;</div>
<div>97&emsp;&emsp;&nbsp;&nbsp;  /** The dataset's name. */</div>
<div>98&emsp;&emsp;&nbsp;&nbsp;  protected/* @spec_public non_null@ */String m_RelationName;</div>
<div>99&emsp;&emsp;</div>
<div>100&emsp;&emsp;&nbsp;&nbsp;  /** The attribute information. */</div>
<div>101&emsp;&emsp;&nbsp;&nbsp;  protected/* @spec_public non_null@ */ArrayList&#60;Attribute> m_Attributes;</div>
<div>102&emsp;&emsp;&nbsp;&nbsp;  /*</div>
<div>103&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * public invariant (\forall int i; 0 &#60;= i && i &#60; m_Attributes.size();</div>
<div>104&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * m_Attributes.get(i) != null);</div>
<div>105&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>106&emsp;&emsp;</div>
<div>107&emsp;&emsp;&nbsp;&nbsp;  /** A map to quickly find attribute indices based on their names. */</div>
<div>108&emsp;&emsp;&nbsp;&nbsp;  protected HashMap&#60;String, Integer> m_NamesToAttributeIndices;</div>
<div>109&emsp;&emsp;</div>
<div>110&emsp;&emsp;&nbsp;&nbsp;  /** The instances. */</div>
<div>111&emsp;&emsp;&nbsp;&nbsp;  protected/* @spec_public non_null@ */ArrayList&#60;Instance> m_Instances;</div>
<div>112&emsp;&emsp;</div>
<div>113&emsp;&emsp;&nbsp;&nbsp;  /** The class attribute's index */</div>
<div>114&emsp;&emsp;&nbsp;&nbsp;  protected int m_ClassIndex;</div>
<div>115&emsp;&emsp;&nbsp;&nbsp;  // @ protected invariant classIndex() == m_ClassIndex;</div>
<div>116&emsp;&emsp;</div>
<div>117&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>118&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * The lines read so far in case of incremental loading. Since the</div>
<div>119&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * StreamTokenizer will be re-initialized with every instance that is read, we</div>
<div>120&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * have to keep track of the number of lines read so far.</div>
<div>121&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>122&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @see #readInstance(Reader)</div>
<div>123&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>124&emsp;&emsp;&nbsp;&nbsp;  protected int m_Lines = 0;</div>
<div>125&emsp;&emsp;</div>
<div>126&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>127&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Reads an ARFF file from a reader, and assigns a weight of one to each</div>
<div>128&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instance. Lets the index of the class attribute be undefined (negative).</div>
<div>129&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>130&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param reader the reader</div>
<div>131&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IOException if the ARFF file is not read successfully</div>
<div>132&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>133&emsp;&emsp;&nbsp;&nbsp;  public Instances(/* @non_null@ */Reader reader) throws IOException {</div>
<div>134&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArffReader arff = new ArffReader(reader, 1000, false);</div>
<div>135&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    initialize(arff.getData(), 1000);</div>
<div>136&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    arff.setRetainStringValues(true);</div>
<div>137&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance inst;</div>
<div>138&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    while ((inst = arff.readInstance(this)) != null) {</div>
<div>139&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      m_Instances.add(inst);</div>
<div>140&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>141&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    compactify();</div>
<div>142&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>143&emsp;&emsp;</div>
<div>144&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>145&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Reads the header of an ARFF file from a reader and reserves space for the</div>
<div>146&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * given number of instances. Lets the class index be undefined (negative).</div>
<div>147&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>148&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param reader the reader</div>
<div>149&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param capacity the capacity</div>
<div>150&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the header is not read successfully or</div>
<div>151&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           the capacity is negative.</div>
<div>152&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IOException if there is a problem with the reader.</div>
<div>153&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @deprecated instead of using this method in conjunction with the</div>
<div>154&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *             &#60;code>readInstance(Reader)&#60;/code> method, one should use the</div>
<div>155&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *             &#60;code>ArffLoader&#60;/code> or &#60;code>DataSource&#60;/code> class</div>
<div>156&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *             instead.</div>
<div>157&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @see weka.core.converters.ArffLoader</div>
<div>158&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @see weka.core.converters.ConverterUtils.DataSource</div>
<div>159&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>160&emsp;&emsp;&nbsp;&nbsp;  // @ requires capacity >= 0;</div>
<div>161&emsp;&emsp;&nbsp;&nbsp;  // @ ensures classIndex() == -1;</div>
<div>162&emsp;&emsp;&nbsp;&nbsp;  @Deprecated</div>
<div>163&emsp;&emsp;&nbsp;&nbsp;  public Instances(/* @non_null@ */Reader reader, int capacity) throws IOException {</div>
<div>164&emsp;&emsp;</div>
<div>165&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArffReader arff = new ArffReader(reader, 0);</div>
<div>166&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances header = arff.getStructure();</div>
<div>167&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    initialize(header, capacity);</div>
<div>168&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Lines = arff.getLineNo();</div>
<div>169&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>170&emsp;&emsp;</div>
<div>171&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>172&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Constructor copying all instances and references to the header information</div>
<div>173&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * from the given set of instances.</div>
<div>174&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>175&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param dataset the set to be copied</div>
<div>176&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>177&emsp;&emsp;&nbsp;&nbsp;  public Instances(/* @non_null@ */Instances dataset) {</div>
<div>178&emsp;&emsp;</div>
<div>179&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    this(dataset, dataset.numInstances());</div>
<div>180&emsp;&emsp;</div>
<div>181&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    dataset.copyInstances(0, this, dataset.numInstances());</div>
<div>182&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>183&emsp;&emsp;</div>
<div>184&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>185&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Constructor creating an empty set of instances. Copies references to the</div>
<div>186&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * header information from the given set of instances. Sets the capacity of</div>
<div>187&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the set of instances to 0 if its negative.</div>
<div>188&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>189&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param dataset the instances from which the header information is to be</div>
<div>190&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *          taken</div>
<div>191&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param capacity the capacity of the new dataset</div>
<div>192&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>193&emsp;&emsp;&nbsp;&nbsp;  public Instances(/* @non_null@ */Instances dataset, int capacity) {</div>
<div>194&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    initialize(dataset, capacity);</div>
<div>195&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>196&emsp;&emsp;</div>
<div>197&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>198&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * initializes with the header information of the given dataset and sets the</div>
<div>199&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * capacity of the set of instances.</div>
<div>200&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>201&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param dataset the dataset to use as template</div>
<div>202&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param capacity the number of rows to reserve</div>
<div>203&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>204&emsp;&emsp;&nbsp;&nbsp;  protected void initialize(Instances dataset, int capacity) {</div>
<div style="background-color:limegreen;">205&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (capacity &#60; 0) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>206&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      capacity = 0;</div>
<div>207&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>208&emsp;&emsp;</div>
<div>209&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Strings only have to be "shallow" copied because</div>
<div>210&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // they can't be modified.</div>
<div>211&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_ClassIndex = dataset.m_ClassIndex;</div>
<div>212&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_RelationName = dataset.m_RelationName;</div>
<div>213&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Attributes = dataset.m_Attributes;</div>
<div>214&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_NamesToAttributeIndices = dataset.m_NamesToAttributeIndices;</div>
<div>215&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances = new ArrayList&#60;Instance>(capacity);</div>
<div>216&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>217&emsp;&emsp;</div>
<div>218&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>219&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new set of instances by copying a subset of another set.</div>
<div>220&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>221&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param source the set of instances from which a subset is to be created</div>
<div>222&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param first the index of the first instance to be copied</div>
<div>223&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param toCopy the number of instances to be copied</div>
<div>224&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if first and toCopy are out of range</div>
<div>225&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>226&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= first;</div>
<div>227&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= toCopy;</div>
<div>228&emsp;&emsp;&nbsp;&nbsp;  // @ requires first + toCopy &#60;= source.numInstances();</div>
<div>229&emsp;&emsp;&nbsp;&nbsp;  public Instances(/* @non_null@ */Instances source, int first, int toCopy) {</div>
<div>230&emsp;&emsp;</div>
<div>231&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    this(source, toCopy);</div>
<div>232&emsp;&emsp;</div>
<div style="background-color:limegreen;">233&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if ((first &#60; 0) || ((first + toCopy) > source.numInstances())) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES] & [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>234&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Parameters first and/or toCopy out "</div>
<div>235&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + "of range");</div>
<div>236&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>237&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    source.copyInstances(first, this, toCopy);</div>
<div>238&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>239&emsp;&emsp;</div>
<div>240&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>241&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates an empty set of instances. Uses the given attribute information.</div>
<div>242&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sets the capacity of the set of instances to 0 if its negative. Given</div>
<div>243&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * attribute information must not be changed after this constructor has been</div>
<div>244&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * used.</div>
<div>245&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>246&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param name the name of the relation</div>
<div>247&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attInfo the attribute information</div>
<div>248&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param capacity the capacity of the set</div>
<div>249&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if attribute names are not unique</div>
<div>250&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>251&emsp;&emsp;&nbsp;&nbsp;  public Instances(/* @non_null@ */String name,</div>
<div>252&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    /* @non_null@ */ArrayList&#60;Attribute> attInfo, int capacity) {</div>
<div>253&emsp;&emsp;</div>
<div>254&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // check whether the attribute names are unique</div>
<div>255&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    HashSet&#60;String> names = new HashSet&#60;String>();</div>
<div>256&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    StringBuffer nonUniqueNames = new StringBuffer();</div>
<div style="background-color:limegreen;">257&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (Attribute att : attInfo) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div style="background-color:limegreen;">258&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (names.contains(att.name())) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>259&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        nonUniqueNames.append("'" + att.name() + "' ");</div>
<div>260&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>261&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      names.add(att.name());</div>
<div>262&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">263&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (names.size() != attInfo.size()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>264&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Attribute names are not unique!"</div>
<div>265&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + " Causes: " + nonUniqueNames.toString());</div>
<div>266&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>267&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    names.clear();</div>
<div>268&emsp;&emsp;</div>
<div>269&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_RelationName = name;</div>
<div>270&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_ClassIndex = -1;</div>
<div>271&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Attributes = attInfo;</div>
<div>272&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_NamesToAttributeIndices = new HashMap&#60;String, Integer>((int) (numAttributes() / 0.75));</div>
<div style="background-color:limegreen;">273&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; numAttributes(); i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>274&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      attribute(i).setIndex(i);</div>
<div>275&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      m_NamesToAttributeIndices.put(attribute(i).name(), i);</div>
<div>276&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>277&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances = new ArrayList&#60;Instance>(capacity);</div>
<div>278&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>279&emsp;&emsp;</div>
<div>280&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>281&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Create a copy of the structure. If the data has string or relational</div>
<div>282&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * attributes, theses are replaced by empty copies. Other attributes are left</div>
<div>283&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * unmodified, but the underlying list structure holding references to the attributes</div>
<div>284&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * is shallow-copied, so that other Instances objects with a reference to this list are not affected.</div>
<div>285&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>286&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return a copy of the instance structure.</div>
<div>287&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>288&emsp;&emsp;&nbsp;&nbsp;  public Instances stringFreeStructure() {</div>
<div>289&emsp;&emsp;</div>
<div>290&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> newAtts = new ArrayList&#60;Attribute>();</div>
<div style="background-color:limegreen;">291&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (Attribute att : m_Attributes) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div style="background-color:limegreen;">292&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (att.type() == Attribute.STRING) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>293&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newAtts.add(new Attribute(att.name(), (List&#60;String>) null, att.index()));</div>
<div style="background-color:limegreen;">294&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      } else if (att.type() == Attribute.RELATIONAL) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>295&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newAtts.add(new Attribute(att.name(), new Instances(att.relation(), 0),</div>
<div>296&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          att.index()));</div>
<div>297&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>298&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">299&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (newAtts.size() == 0) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>300&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return new Instances(this, 0);</div>
<div>301&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>302&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> atts = Utils.cast(m_Attributes.clone());</div>
<div style="background-color:limegreen;">303&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (Attribute att : newAtts) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>304&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      atts.set(att.index(), att);</div>
<div>305&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>306&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances result = new Instances(this, 0);</div>
<div>307&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.m_Attributes = atts;</div>
<div>308&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return result;</div>
<div>309&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>310&emsp;&emsp;</div>
<div>311&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>312&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Adds one instance to the end of the set. Shallow copies instance before it</div>
<div>313&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * is added. Increases the size of the dataset if it is not large enough. Does</div>
<div>314&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * not check if the instance is compatible with the dataset. Note: String or</div>
<div>315&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * relational values are not transferred.</div>
<div>316&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>317&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param instance the instance to be added</div>
<div>318&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>319&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>320&emsp;&emsp;&nbsp;&nbsp;  public boolean add(/* @non_null@ */Instance instance) {</div>
<div>321&emsp;&emsp;</div>
<div>322&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance newInstance = (Instance) instance.copy();</div>
<div>323&emsp;&emsp;</div>
<div>324&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newInstance.setDataset(this);</div>
<div>325&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances.add(newInstance);</div>
<div>326&emsp;&emsp;</div>
<div>327&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return true;</div>
<div>328&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>329&emsp;&emsp;</div>
<div>330&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>331&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Adds one instance at the given position in the list. Shallow</div>
<div>332&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * copies instance before it is added. Increases the size of the</div>
<div>333&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * dataset if it is not large enough. Does not check if the instance</div>
<div>334&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * is compatible with the dataset. Note: String or relational values</div>
<div>335&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * are not transferred.</div>
<div>336&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>337&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index position where instance is to be inserted</div>
<div>338&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param instance the instance to be added</div>
<div>339&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>340&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index;</div>
<div>341&emsp;&emsp;&nbsp;&nbsp;  // @ requires index &#60; m_Instances.size();</div>
<div>342&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>343&emsp;&emsp;&nbsp;&nbsp;  public void add(int index, /* @non_null@ */Instance instance) {</div>
<div>344&emsp;&emsp;</div>
<div>345&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance newInstance = (Instance) instance.copy();</div>
<div>346&emsp;&emsp;</div>
<div>347&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newInstance.setDataset(this);</div>
<div>348&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances.add(index, newInstance);</div>
<div>349&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>350&emsp;&emsp;</div>
<div>351&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>352&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns an attribute.</div>
<div>353&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>354&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index the attribute's index (index starts with 0)</div>
<div>355&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the attribute at the given position</div>
<div>356&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>357&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index;</div>
<div>358&emsp;&emsp;&nbsp;&nbsp;  // @ requires index &#60; m_Attributes.size();</div>
<div>359&emsp;&emsp;&nbsp;&nbsp;  // @ ensures \result != null;</div>
<div>360&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */Attribute attribute(int index) {</div>
<div>361&emsp;&emsp;</div>
<div>362&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Attributes.get(index);</div>
<div>363&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>364&emsp;&emsp;</div>
<div>365&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>366&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns an attribute given its name. If there is more than one attribute</div>
<div>367&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * with the same name, it returns the first one. Returns null if the attribute</div>
<div>368&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * can't be found.</div>
<div>369&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>370&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param name the attribute's name</div>
<div>371&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the attribute with the given name, null if the attribute can't be</div>
<div>372&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *         found</div>
<div>373&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>374&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */Attribute attribute(String name) {</div>
<div>375&emsp;&emsp;</div>
<div>376&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Integer index = m_NamesToAttributeIndices.get(name);</div>
<div style="background-color:limegreen;">377&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (index != null) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>378&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return attribute(index);</div>
<div>379&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>380&emsp;&emsp;</div>
<div>381&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return null;</div>
<div>382&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>383&emsp;&emsp;</div>
<div>384&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>385&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Checks for attributes of the given type in the dataset</div>
<div>386&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>387&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attType the attribute type to look for</div>
<div>388&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return true if attributes of the given type are present</div>
<div>389&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>390&emsp;&emsp;&nbsp;&nbsp;  public boolean checkForAttributeType(int attType) {</div>
<div>391&emsp;&emsp;</div>
<div>392&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int i = 0;</div>
<div>393&emsp;&emsp;</div>
<div style="background-color:limegreen;">394&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    while (i &#60; m_Attributes.size()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div style="background-color:limegreen;">395&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (attribute(i++).type() == attType) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>396&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        return true;</div>
<div>397&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>398&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>399&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return false;</div>
<div>400&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>401&emsp;&emsp;</div>
<div>402&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>403&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Checks for string attributes in the dataset</div>
<div>404&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>405&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return true if string attributes are present, false otherwise</div>
<div>406&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>407&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */boolean checkForStringAttributes() {</div>
<div>408&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return checkForAttributeType(Attribute.STRING);</div>
<div>409&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>410&emsp;&emsp;</div>
<div>411&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>412&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Checks if the given instance is compatible with this dataset. Only looks at</div>
<div>413&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the size of the instance and the ranges of the values for nominal and</div>
<div>414&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * string attributes.</div>
<div>415&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>416&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param instance the instance to check</div>
<div>417&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return true if the instance is compatible with the dataset</div>
<div>418&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>419&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */boolean checkInstance(Instance instance) {</div>
<div>420&emsp;&emsp;</div>
<div>421&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (instance.numAttributes() != numAttributes()) {</div>
<div>422&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return false;</div>
<div>423&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>424&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numAttributes(); i++) {</div>
<div>425&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (instance.isMissing(i)) {</div>
<div>426&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        continue;</div>
<div>427&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else if (attribute(i).isNominal() || attribute(i).isString()) {</div>
<div>428&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (!(Utils.eq(instance.value(i), (int) instance.value(i)))) {</div>
<div>429&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          return false;</div>
<div>430&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        } else if (Utils.sm(instance.value(i), 0)</div>
<div>431&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          || Utils.gr(instance.value(i), attribute(i).numValues())) {</div>
<div>432&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          return false;</div>
<div>433&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>434&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>435&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>436&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return true;</div>
<div>437&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>438&emsp;&emsp;</div>
<div>439&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>440&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the class attribute.</div>
<div>441&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>442&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the class attribute</div>
<div>443&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws UnassignedClassException if the class is not set</div>
<div>444&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>445&emsp;&emsp;&nbsp;&nbsp;  // @ requires classIndex() >= 0;</div>
<div>446&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */Attribute classAttribute() {</div>
<div>447&emsp;&emsp;</div>
<div style="background-color:limegreen;">448&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (m_ClassIndex &#60; 0) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>449&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new UnassignedClassException("Class index is negative (not set)!");</div>
<div>450&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>451&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return attribute(m_ClassIndex);</div>
<div>452&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>453&emsp;&emsp;</div>
<div>454&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>455&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the class attribute's index. Returns negative number if it's</div>
<div>456&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * undefined.</div>
<div>457&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>458&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the class index as an integer</div>
<div>459&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>460&emsp;&emsp;&nbsp;&nbsp;  // ensures \result == m_ClassIndex;</div>
<div>461&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */int classIndex() {</div>
<div>462&emsp;&emsp;</div>
<div>463&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_ClassIndex;</div>
<div>464&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>465&emsp;&emsp;</div>
<div>466&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>467&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Compactifies the set of instances. Decreases the capacity of the set so</div>
<div>468&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * that it matches the number of instances in the set.</div>
<div>469&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>470&emsp;&emsp;&nbsp;&nbsp;  public void compactify() {</div>
<div>471&emsp;&emsp;</div>
<div>472&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances.trimToSize();</div>
<div>473&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>474&emsp;&emsp;</div>
<div>475&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>476&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Removes all instances from the set.</div>
<div>477&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>478&emsp;&emsp;&nbsp;&nbsp;  public void delete() {</div>
<div>479&emsp;&emsp;</div>
<div>480&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances = new ArrayList&#60;Instance>();</div>
<div>481&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>482&emsp;&emsp;</div>
<div>483&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>484&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Removes an instance at the given position from the set.</div>
<div>485&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>486&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index the instance's position (index starts with 0)</div>
<div>487&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>488&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index && index &#60; numInstances();</div>
<div>489&emsp;&emsp;&nbsp;&nbsp;  public void delete(int index) {</div>
<div>490&emsp;&emsp;</div>
<div>491&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances.remove(index);</div>
<div>492&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>493&emsp;&emsp;</div>
<div>494&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>495&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Deletes an attribute at the given position (0 to numAttributes()</div>
<div>496&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * - 1). Attribute objects after the deletion point are copied so</div>
<div>497&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * that their indices can be decremented. Creates a fresh list to</div>
<div>498&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * hold the old and new attribute objects. </div>
<div>499&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param position the attribute's position (position starts with 0)</div>
<div>500&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the given index is out of range or the</div>
<div>501&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           class attribute is being deleted</div>
<div>502&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>503&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= position && position &#60; numAttributes();</div>
<div>504&emsp;&emsp;&nbsp;&nbsp;  // @ requires position != classIndex();</div>
<div>505&emsp;&emsp;&nbsp;&nbsp;  public void deleteAttributeAt(int position) {</div>
<div>506&emsp;&emsp;</div>
<div>507&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if ((position &#60; 0) || (position >= m_Attributes.size())) {</div>
<div>508&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Index out of range");</div>
<div>509&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>510&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (position == m_ClassIndex) {</div>
<div>511&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Can't delete class attribute");</div>
<div>512&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>513&emsp;&emsp;</div>
<div>514&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> newList = new ArrayList&#60;Attribute>(m_Attributes.size() - 1);</div>
<div>515&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    HashMap&#60;String, Integer> newMap = new HashMap&#60;String, Integer>((int) ((m_Attributes.size() - 1) / 0.75));</div>
<div>516&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0 ; i &#60; position; i++) {</div>
<div>517&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute att = m_Attributes.get(i);</div>
<div>518&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newList.add(att);</div>
<div>519&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newMap.put(att.name(), i);</div>
<div>520&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>521&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = position + 1; i &#60; m_Attributes.size(); i++) {</div>
<div>522&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute newAtt = (Attribute) m_Attributes.get(i).copy();</div>
<div>523&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newAtt.setIndex(i - 1);</div>
<div>524&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newList.add(newAtt);</div>
<div>525&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newMap.put(newAtt.name(), i - 1);</div>
<div>526&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>527&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Attributes = newList;</div>
<div>528&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_NamesToAttributeIndices = newMap;</div>
<div>529&emsp;&emsp;</div>
<div>530&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (m_ClassIndex > position) {</div>
<div>531&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      m_ClassIndex--;</div>
<div>532&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>533&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numInstances(); i++) {</div>
<div>534&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).setDataset(null);</div>
<div>535&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).deleteAttributeAt(position);</div>
<div>536&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).setDataset(this);</div>
<div>537&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>538&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>539&emsp;&emsp;</div>
<div>540&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>541&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Deletes all attributes of the given type in the dataset. A deep copy of the</div>
<div>542&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * attribute information is performed before an attribute is deleted.</div>
<div>543&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>544&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attType the attribute type to delete</div>
<div>545&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if attribute couldn't be successfully</div>
<div>546&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           deleted (probably because it is the class attribute).</div>
<div>547&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>548&emsp;&emsp;&nbsp;&nbsp;  public void deleteAttributeType(int attType) {</div>
<div>549&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int i = 0;</div>
<div>550&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    while (i &#60; m_Attributes.size()) {</div>
<div>551&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (attribute(i).type() == attType) {</div>
<div>552&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        deleteAttributeAt(i);</div>
<div>553&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>554&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        i++;</div>
<div>555&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>556&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>557&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>558&emsp;&emsp;</div>
<div>559&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>560&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Deletes all string attributes in the dataset. A deep copy of the attribute</div>
<div>561&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * information is performed before an attribute is deleted.</div>
<div>562&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>563&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if string attribute couldn't be</div>
<div>564&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           successfully deleted (probably because it is the class</div>
<div>565&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           attribute).</div>
<div>566&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @see #deleteAttributeType(int)</div>
<div>567&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>568&emsp;&emsp;&nbsp;&nbsp;  public void deleteStringAttributes() {</div>
<div>569&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    deleteAttributeType(Attribute.STRING);</div>
<div>570&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>571&emsp;&emsp;</div>
<div>572&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>573&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Removes all instances with missing values for a particular attribute from</div>
<div>574&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the dataset.</div>
<div>575&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>576&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the attribute's index (index starts with 0)</div>
<div>577&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>578&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= attIndex && attIndex &#60; numAttributes();</div>
<div>579&emsp;&emsp;&nbsp;&nbsp;  public void deleteWithMissing(int attIndex) {</div>
<div>580&emsp;&emsp;</div>
<div>581&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Instance> newInstances = new ArrayList&#60;Instance>(numInstances());</div>
<div>582&emsp;&emsp;</div>
<div style="background-color:limegreen;">583&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; numInstances(); i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div style="background-color:limegreen;">584&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (!instance(i).isMissing(attIndex)) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>585&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newInstances.add(instance(i));</div>
<div>586&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>587&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>588&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances = newInstances;</div>
<div>589&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>590&emsp;&emsp;</div>
<div>591&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>592&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Removes all instances with missing values for a particular attribute from</div>
<div>593&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the dataset.</div>
<div>594&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>595&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute</div>
<div>596&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>597&emsp;&emsp;&nbsp;&nbsp;  public void deleteWithMissing(/* @non_null@ */Attribute att) {</div>
<div>598&emsp;&emsp;</div>
<div>599&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    deleteWithMissing(att.index());</div>
<div>600&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>601&emsp;&emsp;</div>
<div>602&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>603&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Removes all instances with a missing class value from the dataset.</div>
<div>604&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>605&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws UnassignedClassException if class is not set</div>
<div>606&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>607&emsp;&emsp;&nbsp;&nbsp;  public void deleteWithMissingClass() {</div>
<div>608&emsp;&emsp;</div>
<div style="background-color:limegreen;">609&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (m_ClassIndex &#60; 0) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>610&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new UnassignedClassException("Class index is negative (not set)!");</div>
<div>611&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>612&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    deleteWithMissing(m_ClassIndex);</div>
<div>613&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>614&emsp;&emsp;</div>
<div>615&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>616&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns an enumeration of all the attributes. The class attribute (if set)</div>
<div>617&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * is skipped by this enumeration.</div>
<div>618&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>619&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return enumeration of all the attributes.</div>
<div>620&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>621&emsp;&emsp;&nbsp;&nbsp;  public/* @non_null pure@ */Enumeration&#60;Attribute> enumerateAttributes() {</div>
<div>622&emsp;&emsp;</div>
<div>623&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return new WekaEnumeration&#60;Attribute>(m_Attributes, m_ClassIndex);</div>
<div>624&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>625&emsp;&emsp;</div>
<div>626&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>627&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns an enumeration of all instances in the dataset.</div>
<div>628&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>629&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return enumeration of all instances in the dataset</div>
<div>630&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>631&emsp;&emsp;&nbsp;&nbsp;  public/* @non_null pure@ */Enumeration&#60;Instance> enumerateInstances() {</div>
<div>632&emsp;&emsp;</div>
<div>633&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return new WekaEnumeration&#60;Instance>(m_Instances);</div>
<div>634&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>635&emsp;&emsp;</div>
<div>636&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>637&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Checks if two headers are equivalent. If not, then returns a message why</div>
<div>638&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * they differ.</div>
<div>639&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>640&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param dataset another dataset</div>
<div>641&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return null if the header of the given dataset is equivalent to this</div>
<div>642&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *         header, otherwise a message with details on why they differ</div>
<div>643&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>644&emsp;&emsp;&nbsp;&nbsp;  public String equalHeadersMsg(Instances dataset) {</div>
<div>645&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Check class and all attributes</div>
<div style="background-color:limegreen;">646&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (m_ClassIndex != dataset.m_ClassIndex) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>647&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return "Class index differ: " + (m_ClassIndex + 1) + " != "</div>
<div>648&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + (dataset.m_ClassIndex + 1);</div>
<div>649&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>650&emsp;&emsp;</div>
<div style="background-color:limegreen;">651&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (m_Attributes.size() != dataset.m_Attributes.size()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>652&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return "Different number of attributes: " + m_Attributes.size() + " != "</div>
<div>653&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + dataset.m_Attributes.size();</div>
<div>654&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>655&emsp;&emsp;</div>
<div style="background-color:limegreen;">656&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; m_Attributes.size(); i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>657&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      String msg = attribute(i).equalsMsg(dataset.attribute(i));</div>
<div style="background-color:limegreen;">658&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (msg != null) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>659&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        return "Attributes differ at position " + (i + 1) + ":\n" + msg;</div>
<div>660&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>661&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>662&emsp;&emsp;</div>
<div>663&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return null;</div>
<div>664&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>665&emsp;&emsp;</div>
<div>666&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>667&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Checks if two headers are equivalent.</div>
<div>668&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>669&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param dataset another dataset</div>
<div>670&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return true if the header of the given dataset is equivalent to this</div>
<div>671&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *         header</div>
<div>672&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>673&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */boolean equalHeaders(Instances dataset) {</div>
<div style="background-color:limegreen;">674&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    return (equalHeadersMsg(dataset) == null);&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>675&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>676&emsp;&emsp;</div>
<div>677&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>678&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the first instance in the set.</div>
<div>679&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>680&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the first instance in the set</div>
<div>681&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>682&emsp;&emsp;&nbsp;&nbsp;  // @ requires numInstances() > 0;</div>
<div>683&emsp;&emsp;&nbsp;&nbsp;  public/* @non_null pure@ */Instance firstInstance() {</div>
<div>684&emsp;&emsp;</div>
<div>685&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Instances.get(0);</div>
<div>686&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>687&emsp;&emsp;</div>
<div>688&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>689&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns a random number generator. The initial seed of the random number</div>
<div>690&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * generator depends on the given seed and the hash code of a string</div>
<div>691&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * representation of a instances chosen based on the given seed.</div>
<div>692&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>693&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param seed the given seed</div>
<div>694&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the random number generator</div>
<div>695&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>696&emsp;&emsp;&nbsp;&nbsp;  public Random getRandomNumberGenerator(long seed) {</div>
<div>697&emsp;&emsp;</div>
<div>698&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Random r = new Random(seed);</div>
<div>699&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    r.setSeed(instance(r.nextInt(numInstances())).toStringNoWeight().hashCode()</div>
<div>700&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      + seed);</div>
<div>701&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return r;</div>
<div>702&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>703&emsp;&emsp;</div>
<div>704&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>705&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Inserts an attribute at the given position (0 to numAttributes())</div>
<div>706&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * and sets all values to be missing. Shallow copies the attribute</div>
<div>707&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * before it is inserted. Existing attribute objects at and after</div>
<div>708&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the insertion point are also copied so that their indices can be</div>
<div>709&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * incremented. Creates a fresh list to hold the old and new</div>
<div>710&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * attribute objects.</div>
<div>711&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>712&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute to be inserted</div>
<div>713&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param position the attribute's position (position starts with 0)</div>
<div>714&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the given index is out of range</div>
<div>715&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>716&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= position;</div>
<div>717&emsp;&emsp;&nbsp;&nbsp;  // @ requires position &#60;= numAttributes();</div>
<div>718&emsp;&emsp;&nbsp;&nbsp;  public void insertAttributeAt(/* @non_null@ */Attribute att, int position) {</div>
<div>719&emsp;&emsp;</div>
<div>720&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if ((position &#60; 0) || (position > m_Attributes.size())) {</div>
<div>721&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Index out of range");</div>
<div>722&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>723&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (attribute(att.name()) != null) {</div>
<div>724&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Attribute name '" + att.name()</div>
<div>725&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + "' already in use at position #" + attribute(att.name()).index());</div>
<div>726&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>727&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    att = (Attribute) att.copy();</div>
<div>728&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    att.setIndex(position);</div>
<div>729&emsp;&emsp;</div>
<div>730&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> newList = new ArrayList&#60;Attribute>(m_Attributes.size() + 1);</div>
<div>731&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    HashMap&#60;String, Integer> newMap = new HashMap&#60;String, Integer>((int) ((m_Attributes.size() + 1) / 0.75));</div>
<div>732&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0 ; i &#60; position; i++) {</div>
<div>733&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute oldAtt = m_Attributes.get(i);</div>
<div>734&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newList.add(oldAtt);</div>
<div>735&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newMap.put(oldAtt.name(), i);</div>
<div>736&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>737&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newList.add(att);</div>
<div>738&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newMap.put(att.name(), position);</div>
<div>739&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = position; i &#60; m_Attributes.size(); i++) {</div>
<div>740&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute newAtt = (Attribute) m_Attributes.get(i).copy();</div>
<div>741&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newAtt.setIndex(i + 1);</div>
<div>742&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newList.add(newAtt);</div>
<div>743&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newMap.put(newAtt.name(), i + 1);</div>
<div>744&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>745&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Attributes = newList;</div>
<div>746&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_NamesToAttributeIndices = newMap;</div>
<div>747&emsp;&emsp;</div>
<div>748&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numInstances(); i++) {</div>
<div>749&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).setDataset(null);</div>
<div>750&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).insertAttributeAt(position);</div>
<div>751&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).setDataset(this);</div>
<div>752&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>753&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (m_ClassIndex >= position) {</div>
<div>754&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      m_ClassIndex++;</div>
<div>755&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>756&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>757&emsp;&emsp;</div>
<div>758&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>759&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the instance at the given position.</div>
<div>760&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>761&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index the instance's index (index starts with 0)</div>
<div>762&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the instance at the given position</div>
<div>763&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>764&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index;</div>
<div>765&emsp;&emsp;&nbsp;&nbsp;  // @ requires index &#60; numInstances();</div>
<div>766&emsp;&emsp;&nbsp;&nbsp;  public/* @non_null pure@ */Instance instance(int index) {</div>
<div>767&emsp;&emsp;</div>
<div>768&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Instances.get(index);</div>
<div>769&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>770&emsp;&emsp;</div>
<div>771&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>772&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the instance at the given position.</div>
<div>773&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>774&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index the instance's index (index starts with 0)</div>
<div>775&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the instance at the given position</div>
<div>776&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>777&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index;</div>
<div>778&emsp;&emsp;&nbsp;&nbsp;  // @ requires index &#60; numInstances();</div>
<div>779&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>780&emsp;&emsp;&nbsp;&nbsp;  public/* @non_null pure@ */Instance get(int index) {</div>
<div>781&emsp;&emsp;</div>
<div>782&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Instances.get(index);</div>
<div>783&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>784&emsp;&emsp;</div>
<div>785&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>786&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the kth-smallest attribute value of a numeric attribute.</div>
<div>787&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>788&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the Attribute object</div>
<div>789&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param k the value of k</div>
<div>790&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the kth-smallest value</div>
<div>791&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>792&emsp;&emsp;&nbsp;&nbsp;  public double kthSmallestValue(Attribute att, int k) {</div>
<div>793&emsp;&emsp;</div>
<div>794&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return kthSmallestValue(att.index(), k);</div>
<div>795&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>796&emsp;&emsp;</div>
<div>797&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>798&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the kth-smallest attribute value of a numeric attribute. NOTE</div>
<div>799&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * CHANGE: Missing values (NaN values) are now treated as Double.MAX_VALUE.</div>
<div>800&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Also, the order of the instances in the data is no longer affected.</div>
<div>801&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>802&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the attribute's index</div>
<div>803&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param k the value of k</div>
<div>804&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the kth-smallest value</div>
<div>805&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>806&emsp;&emsp;&nbsp;&nbsp;  public double kthSmallestValue(int attIndex, int k) {</div>
<div>807&emsp;&emsp;</div>
<div>808&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (!attribute(attIndex).isNumeric()) {</div>
<div>809&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(</div>
<div>810&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        "Instances: attribute must be numeric to compute kth-smallest value.");</div>
<div>811&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>812&emsp;&emsp;</div>
<div>813&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if ((k &#60; 1) || (k > numInstances())) {</div>
<div>814&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(</div>
<div>815&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        "Instances: value for k for computing kth-smallest value too large.");</div>
<div>816&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>817&emsp;&emsp;</div>
<div>818&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] vals = new double[numInstances()];</div>
<div>819&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; vals.length; i++) {</div>
<div>820&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      double val = instance(i).value(attIndex);</div>
<div>821&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (Utils.isMissingValue(val)) {</div>
<div>822&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        vals[i] = Double.MAX_VALUE;</div>
<div>823&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>824&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        vals[i] = val;</div>
<div>825&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>826&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>827&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return Utils.kthSmallestValue(vals, k);</div>
<div>828&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>829&emsp;&emsp;</div>
<div>830&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>831&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the last instance in the set.</div>
<div>832&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>833&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the last instance in the set</div>
<div>834&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>835&emsp;&emsp;&nbsp;&nbsp;  // @ requires numInstances() > 0;</div>
<div>836&emsp;&emsp;&nbsp;&nbsp;  public/* @non_null pure@ */Instance lastInstance() {</div>
<div>837&emsp;&emsp;</div>
<div>838&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Instances.get(m_Instances.size() - 1);</div>
<div>839&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>840&emsp;&emsp;</div>
<div>841&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>842&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the mean (mode) for a numeric (nominal) attribute as a</div>
<div>843&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * floating-point value. Returns 0 if the attribute is neither nominal nor</div>
<div>844&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * numeric. If all values are missing it returns zero.</div>
<div>845&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>846&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the attribute's index (index starts with 0)</div>
<div>847&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the mean or the mode</div>
<div>848&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>849&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */double meanOrMode(int attIndex) {</div>
<div>850&emsp;&emsp;</div>
<div>851&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double result, found;</div>
<div>852&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int[] counts;</div>
<div>853&emsp;&emsp;</div>
<div>854&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (attribute(attIndex).isNumeric()) {</div>
<div>855&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result = found = 0;</div>
<div>856&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (int j = 0; j &#60; numInstances(); j++) {</div>
<div>857&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (!instance(j).isMissing(attIndex)) {</div>
<div>858&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          found += instance(j).weight();</div>
<div>859&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          result += instance(j).weight() * instance(j).value(attIndex);</div>
<div>860&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>861&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>862&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (found &#60;= 0) {</div>
<div>863&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        return 0;</div>
<div>864&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>865&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        return result / found;</div>
<div>866&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>867&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else if (attribute(attIndex).isNominal()) {</div>
<div>868&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      counts = new int[attribute(attIndex).numValues()];</div>
<div>869&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (int j = 0; j &#60; numInstances(); j++) {</div>
<div>870&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (!instance(j).isMissing(attIndex)) {</div>
<div>871&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          counts[(int) instance(j).value(attIndex)] += instance(j).weight();</div>
<div>872&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>873&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>874&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return Utils.maxIndex(counts);</div>
<div>875&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>876&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return 0;</div>
<div>877&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>878&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>879&emsp;&emsp;</div>
<div>880&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>881&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the mean (mode) for a numeric (nominal) attribute as a</div>
<div>882&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * floating-point value. Returns 0 if the attribute is neither nominal nor</div>
<div>883&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * numeric. If all values are missing it returns zero.</div>
<div>884&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>885&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute</div>
<div>886&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the mean or the mode</div>
<div>887&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>888&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */double meanOrMode(Attribute att) {</div>
<div>889&emsp;&emsp;</div>
<div>890&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return meanOrMode(att.index());</div>
<div>891&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>892&emsp;&emsp;</div>
<div>893&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>894&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the number of attributes.</div>
<div>895&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>896&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the number of attributes as an integer</div>
<div>897&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>898&emsp;&emsp;&nbsp;&nbsp;  // @ ensures \result == m_Attributes.size();</div>
<div>899&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */int numAttributes() {</div>
<div>900&emsp;&emsp;</div>
<div>901&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Attributes.size();</div>
<div>902&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>903&emsp;&emsp;</div>
<div>904&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>905&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the number of class labels.</div>
<div>906&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>907&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the number of class labels as an integer if the class attribute is</div>
<div>908&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *         nominal, 1 otherwise.</div>
<div>909&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws UnassignedClassException if the class is not set</div>
<div>910&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>911&emsp;&emsp;&nbsp;&nbsp;  // @ requires classIndex() >= 0;</div>
<div>912&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */int numClasses() {</div>
<div>913&emsp;&emsp;</div>
<div style="background-color:limegreen;">914&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (m_ClassIndex &#60; 0) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>915&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new UnassignedClassException("Class index is negative (not set)!");</div>
<div>916&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">917&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (!classAttribute().isNominal()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>918&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return 1;</div>
<div>919&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>920&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return classAttribute().numValues();</div>
<div>921&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>922&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>923&emsp;&emsp;</div>
<div>924&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>925&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the number of distinct values of a given attribute. The value</div>
<div>926&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * 'missing' is not counted.</div>
<div>927&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>928&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the attribute (index starts with 0)</div>
<div>929&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the number of distinct values of a given attribute</div>
<div>930&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>931&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= attIndex;</div>
<div>932&emsp;&emsp;&nbsp;&nbsp;  // @ requires attIndex &#60; numAttributes();</div>
<div>933&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */int numDistinctValues(int attIndex) {</div>
<div>934&emsp;&emsp;</div>
<div>935&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    HashSet&#60;Double> set = new HashSet&#60;Double>(2 * numInstances());</div>
<div style="background-color:limegreen;">936&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (Instance current : this) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>937&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      double key = current.value(attIndex);</div>
<div style="background-color:limegreen;">938&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (!Utils.isMissingValue(key)) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>939&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        set.add(key);</div>
<div>940&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>941&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>942&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return set.size();</div>
<div>943&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>944&emsp;&emsp;</div>
<div>945&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>946&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the number of distinct values of a given attribute. The value</div>
<div>947&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * 'missing' is not counted.</div>
<div>948&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>949&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute</div>
<div>950&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the number of distinct values of a given attribute</div>
<div>951&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>952&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */int numDistinctValues(/* @non_null@ */Attribute att) {</div>
<div>953&emsp;&emsp;</div>
<div>954&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return numDistinctValues(att.index());</div>
<div>955&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>956&emsp;&emsp;</div>
<div>957&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>958&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the number of instances in the dataset.</div>
<div>959&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>960&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the number of instances in the dataset as an integer</div>
<div>961&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>962&emsp;&emsp;&nbsp;&nbsp;  // @ ensures \result == m_Instances.size();</div>
<div>963&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */int numInstances() {</div>
<div>964&emsp;&emsp;</div>
<div>965&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Instances.size();</div>
<div>966&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>967&emsp;&emsp;</div>
<div>968&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>969&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the number of instances in the dataset.</div>
<div>970&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>971&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the number of instances in the dataset as an integer</div>
<div>972&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>973&emsp;&emsp;&nbsp;&nbsp;  // @ ensures \result == m_Instances.size();</div>
<div>974&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>975&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */int size() {</div>
<div>976&emsp;&emsp;</div>
<div>977&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Instances.size();</div>
<div>978&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>979&emsp;&emsp;</div>
<div>980&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>981&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Shuffles the instances in the set so that they are ordered randomly.</div>
<div>982&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>983&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>984&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>985&emsp;&emsp;&nbsp;&nbsp;  public void randomize(Random random) {</div>
<div>986&emsp;&emsp;</div>
<div style="background-color:limegreen;">987&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int j = numInstances() - 1; j > 0; j--) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>988&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      swap(j, random.nextInt(j + 1));</div>
<div>989&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>990&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>991&emsp;&emsp;</div>
<div>992&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>993&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Reads a single instance from the reader and appends it to the dataset.</div>
<div>994&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Automatically expands the dataset if it is not large enough to hold the</div>
<div>995&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instance. This method does not check for carriage return at the end of the</div>
<div>996&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * line.</div>
<div>997&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>998&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param reader the reader</div>
<div>999&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return false if end of file has been reached</div>
<div>1000&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IOException if the information is not read successfully</div>
<div>1001&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @deprecated instead of using this method in conjunction with the</div>
<div>1002&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *             &#60;code>readInstance(Reader)&#60;/code> method, one should use the</div>
<div>1003&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *             &#60;code>ArffLoader&#60;/code> or &#60;code>DataSource&#60;/code> class</div>
<div>1004&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *             instead.</div>
<div>1005&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @see weka.core.converters.ArffLoader</div>
<div>1006&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @see weka.core.converters.ConverterUtils.DataSource</div>
<div>1007&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1008&emsp;&emsp;&nbsp;&nbsp;  @Deprecated</div>
<div>1009&emsp;&emsp;&nbsp;&nbsp;  public boolean readInstance(Reader reader) throws IOException {</div>
<div>1010&emsp;&emsp;</div>
<div>1011&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArffReader arff = new ArffReader(reader, this, m_Lines, 1);</div>
<div>1012&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance inst = arff.readInstance(arff.getData(), false);</div>
<div>1013&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Lines = arff.getLineNo();</div>
<div>1014&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (inst != null) {</div>
<div>1015&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      add(inst);</div>
<div>1016&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return true;</div>
<div>1017&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>1018&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return false;</div>
<div>1019&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1020&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1021&emsp;&emsp;</div>
<div>1022&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1023&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Replaces the attribute at the given position (0 to</div>
<div>1024&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * numAttributes()) with the given attribute and sets all its values to</div>
<div>1025&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * be missing. Shallow copies the given attribute before it is</div>
<div>1026&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * inserted. Creates a fresh list to hold the old and new</div>
<div>1027&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * attribute objects.</div>
<div>1028&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1029&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute to be inserted</div>
<div>1030&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param position the attribute's position (position starts with 0)</div>
<div>1031&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the given index is out of range</div>
<div>1032&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1033&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= position;</div>
<div>1034&emsp;&emsp;&nbsp;&nbsp;  // @ requires position &#60;= numAttributes();</div>
<div>1035&emsp;&emsp;&nbsp;&nbsp;  public void replaceAttributeAt(/* @non_null@ */Attribute att, int position) {</div>
<div>1036&emsp;&emsp;</div>
<div>1037&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if ((position &#60; 0) || (position > m_Attributes.size())) {</div>
<div>1038&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Index out of range");</div>
<div>1039&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1040&emsp;&emsp;</div>
<div>1041&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Does the new attribute have a different name?</div>
<div>1042&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (!att.name().equals(m_Attributes.get(position).name())) {</div>
<div>1043&emsp;&emsp;</div>
<div>1044&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Need to check if attribute name already exists</div>
<div>1045&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute candidate = attribute(att.name());</div>
<div>1046&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if ((candidate != null) && (position != candidate.index())) {</div>
<div>1047&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        throw new IllegalArgumentException("Attribute name '" + att.name()</div>
<div>1048&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "' already in use at position #" + </div>
<div>1049&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          attribute(att.name()).index());</div>
<div>1050&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1051&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1052&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    att = (Attribute) att.copy();</div>
<div>1053&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    att.setIndex(position);</div>
<div>1054&emsp;&emsp;</div>
<div>1055&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> newList = new ArrayList&#60;Attribute>(m_Attributes.size());</div>
<div>1056&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    HashMap&#60;String, Integer> newMap = new HashMap&#60;String, Integer>((int) ((m_Attributes.size() + 1) / 0.75));</div>
<div>1057&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0 ; i &#60; position; i++) {</div>
<div>1058&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute oldAtt = m_Attributes.get(i);</div>
<div>1059&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newList.add(oldAtt);</div>
<div>1060&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newMap.put(oldAtt.name(), i);</div>
<div>1061&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1062&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newList.add(att);</div>
<div>1063&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newMap.put(att.name(), position);</div>
<div>1064&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = position + 1; i &#60; m_Attributes.size(); i++) {</div>
<div>1065&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute newAtt = (Attribute) m_Attributes.get(i);</div>
<div>1066&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newList.add(newAtt);</div>
<div>1067&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newMap.put(newAtt.name(), i);</div>
<div>1068&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1069&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Attributes = newList;</div>
<div>1070&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_NamesToAttributeIndices = newMap;</div>
<div>1071&emsp;&emsp;</div>
<div>1072&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numInstances(); i++) {</div>
<div>1073&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).setDataset(null);</div>
<div>1074&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).setMissing(position);</div>
<div>1075&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instance(i).setDataset(this);</div>
<div>1076&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1077&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1078&emsp;&emsp;</div>
<div>1079&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1080&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the relation's name.</div>
<div>1081&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1082&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the relation's name as a string</div>
<div>1083&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1084&emsp;&emsp;&nbsp;&nbsp;  // @ ensures \result == m_RelationName;</div>
<div>1085&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */String relationName() {</div>
<div>1086&emsp;&emsp;</div>
<div>1087&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_RelationName;</div>
<div>1088&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1089&emsp;&emsp;</div>
<div>1090&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1091&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Removes the instance at the given position.</div>
<div>1092&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1093&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index the instance's index (index starts with 0)</div>
<div>1094&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the instance at the given position</div>
<div>1095&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1096&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index;</div>
<div>1097&emsp;&emsp;&nbsp;&nbsp;  // @ requires index &#60; numInstances();</div>
<div>1098&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>1099&emsp;&emsp;&nbsp;&nbsp;  public Instance remove(int index) {</div>
<div>1100&emsp;&emsp;</div>
<div>1101&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return m_Instances.remove(index);</div>
<div>1102&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1103&emsp;&emsp;</div>
<div>1104&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1105&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Renames an attribute. This change only affects this dataset.</div>
<div>1106&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1107&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute's index (index starts with 0)</div>
<div>1108&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param name the new name</div>
<div>1109&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1110&emsp;&emsp;&nbsp;&nbsp;  public void renameAttribute(int att, String name) {</div>
<div>1111&emsp;&emsp;</div>
<div>1112&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Attribute existingAtt = attribute(name);</div>
<div>1113&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (existingAtt != null) {</div>
<div>1114&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (att == existingAtt.index()) {</div>
<div>1115&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        return; // Old name is equal to new name</div>
<div>1116&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1117&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        throw new IllegalArgumentException("Attribute name '" + name</div>
<div>1118&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "' already present at position #" + existingAtt.index());</div>
<div>1119&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1120&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1121&emsp;&emsp;</div>
<div>1122&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Attribute newAtt = attribute(att).copy(name);</div>
<div>1123&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> newVec = new ArrayList&#60;Attribute>(numAttributes());</div>
<div>1124&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    HashMap&#60;String, Integer> newMap = new HashMap&#60;String, Integer>((int)(numAttributes() / 0.75));</div>
<div>1125&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (Attribute attr : m_Attributes) {</div>
<div>1126&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (attr.index() == att) {</div>
<div>1127&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newVec.add(newAtt);</div>
<div>1128&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newMap.put(name, att);</div>
<div>1129&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1130&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newVec.add(attr);</div>
<div>1131&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newMap.put(attr.name(), attr.index());</div>
<div>1132&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1133&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1134&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Attributes = newVec;</div>
<div>1135&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_NamesToAttributeIndices = newMap;</div>
<div>1136&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1137&emsp;&emsp;</div>
<div>1138&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1139&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Renames an attribute. This change only affects this dataset.</div>
<div>1140&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1141&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute</div>
<div>1142&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param name the new name</div>
<div>1143&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1144&emsp;&emsp;&nbsp;&nbsp;  public void renameAttribute(Attribute att, String name) {</div>
<div>1145&emsp;&emsp;</div>
<div>1146&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    renameAttribute(att.index(), name);</div>
<div>1147&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1148&emsp;&emsp;</div>
<div>1149&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1150&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Renames the value of a nominal (or string) attribute value. This change</div>
<div>1151&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * only affects this dataset.</div>
<div>1152&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1153&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute's index (index starts with 0)</div>
<div>1154&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param val the value's index (index starts with 0)</div>
<div>1155&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param name the new name</div>
<div>1156&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1157&emsp;&emsp;&nbsp;&nbsp;  public void renameAttributeValue(int att, int val, String name) {</div>
<div>1158&emsp;&emsp;</div>
<div>1159&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Attribute newAtt = (Attribute) attribute(att).copy();</div>
<div>1160&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> newVec = new ArrayList&#60;Attribute>(numAttributes());</div>
<div>1161&emsp;&emsp;</div>
<div>1162&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newAtt.setValue(val, name);</div>
<div>1163&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (Attribute attr : m_Attributes) {</div>
<div>1164&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (attr.index() == att) {</div>
<div>1165&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newVec.add(newAtt);</div>
<div>1166&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1167&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newVec.add(attr);</div>
<div>1168&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1169&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1170&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Attributes = newVec;</div>
<div>1171&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1172&emsp;&emsp;</div>
<div>1173&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1174&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Renames the value of a nominal (or string) attribute value. This change</div>
<div>1175&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * only affects this dataset.</div>
<div>1176&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1177&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute</div>
<div>1178&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param val the value</div>
<div>1179&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param name the new name</div>
<div>1180&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1181&emsp;&emsp;&nbsp;&nbsp;  public void renameAttributeValue(Attribute att, String val, String name) {</div>
<div>1182&emsp;&emsp;</div>
<div>1183&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int v = att.indexOfValue(val);</div>
<div>1184&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (v == -1) {</div>
<div>1185&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(val + " not found");</div>
<div>1186&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1187&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    renameAttributeValue(att.index(), v, name);</div>
<div>1188&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1189&emsp;&emsp;</div>
<div>1190&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1191&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1192&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement.</div>
<div>1193&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1194&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1195&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1196&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1197&emsp;&emsp;&nbsp;&nbsp;  public Instances resample(Random random) {</div>
<div>1198&emsp;&emsp;</div>
<div>1199&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances newData = new Instances(this, numInstances());</div>
<div>1200&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    while (newData.numInstances() &#60; numInstances()) {</div>
<div>1201&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newData.add(instance(random.nextInt(numInstances())));</div>
<div>1202&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1203&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return newData;</div>
<div>1204&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1205&emsp;&emsp;</div>
<div>1206&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1207&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1208&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement according to the current instance weights. The weights of the</div>
<div>1209&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances in the new dataset are set to one. See also</div>
<div>1210&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * resampleWithWeights(Random, double[], boolean[]).</div>
<div>1211&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1212&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1213&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1214&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1215&emsp;&emsp;&nbsp;&nbsp;  public Instances resampleWithWeights(Random random) {</div>
<div>1216&emsp;&emsp;</div>
<div>1217&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return resampleWithWeights(random, false);</div>
<div>1218&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1219&emsp;&emsp;</div>
<div>1220&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1221&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1222&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement according to the current instance weights. The weights of the</div>
<div>1223&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances in the new dataset are set to one. See also</div>
<div>1224&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * resampleWithWeights(Random, double[], boolean[]).</div>
<div>1225&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1226&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1227&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param sampled an array indicating what has been sampled</div>
<div>1228&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1229&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1230&emsp;&emsp;&nbsp;&nbsp;  public Instances resampleWithWeights(Random random, boolean[] sampled) {</div>
<div>1231&emsp;&emsp;</div>
<div>1232&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return resampleWithWeights(random, sampled, false);</div>
<div>1233&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1234&emsp;&emsp;</div>
<div>1235&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1236&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1237&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement according to the current instance weights. The weights of the</div>
<div>1238&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances in the new dataset are set to one. See also</div>
<div>1239&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * resampleWithWeights(Random, double[], boolean[]).</div>
<div>1240&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1241&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1242&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param representUsingWeights if true, copies are represented using weights</div>
<div>1243&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *          in resampled data</div>
<div>1244&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1245&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1246&emsp;&emsp;&nbsp;&nbsp;  public Instances resampleWithWeights(Random random,</div>
<div>1247&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    boolean representUsingWeights) {</div>
<div>1248&emsp;&emsp;</div>
<div>1249&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return resampleWithWeights(random, null, representUsingWeights);</div>
<div>1250&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1251&emsp;&emsp;</div>
<div>1252&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1253&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1254&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement according to the current instance weights. The weights of the</div>
<div>1255&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances in the new dataset are set to one. See also</div>
<div>1256&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * resampleWithWeights(Random, double[], boolean[]).</div>
<div>1257&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1258&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1259&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param sampled an array indicating what has been sampled</div>
<div>1260&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param representUsingWeights if true, copies are represented using weights</div>
<div>1261&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *          in resampled data</div>
<div>1262&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1263&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1264&emsp;&emsp;&nbsp;&nbsp;  public Instances resampleWithWeights(Random random, boolean[] sampled,</div>
<div>1265&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    boolean representUsingWeights) {</div>
<div>1266&emsp;&emsp;</div>
<div>1267&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] weights = new double[numInstances()];</div>
<div>1268&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; weights.length; i++) {</div>
<div>1269&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      weights[i] = instance(i).weight();</div>
<div>1270&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1271&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return resampleWithWeights(random, weights, sampled, representUsingWeights);</div>
<div>1272&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1273&emsp;&emsp;</div>
<div>1274&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1275&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1276&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement according to the given weight vector. See also</div>
<div>1277&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * resampleWithWeights(Random, double[], boolean[]).</div>
<div>1278&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1279&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1280&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param weights the weight vector</div>
<div>1281&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1282&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the weights array is of the wrong</div>
<div>1283&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           length or contains negative weights.</div>
<div>1284&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1285&emsp;&emsp;&nbsp;&nbsp;  public Instances resampleWithWeights(Random random, double[] weights) {</div>
<div>1286&emsp;&emsp;</div>
<div>1287&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return resampleWithWeights(random, weights, null);</div>
<div>1288&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1289&emsp;&emsp;</div>
<div>1290&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1291&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1292&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement according to the given weight vector. The weights of the</div>
<div>1293&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances in the new dataset are set to one. The length of the weight</div>
<div>1294&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * vector has to be the same as the number of instances in the dataset, and</div>
<div>1295&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * all weights have to be positive. Uses Walker's method, see pp. 232 of</div>
<div>1296&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * "Stochastic Simulation" by B.D. Ripley (1987).</div>
<div>1297&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1298&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1299&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param weights the weight vector</div>
<div>1300&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param sampled an array indicating what has been sampled, can be null</div>
<div>1301&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1302&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the weights array is of the wrong</div>
<div>1303&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           length or contains negative weights.</div>
<div>1304&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1305&emsp;&emsp;&nbsp;&nbsp;  public Instances resampleWithWeights(Random random, double[] weights,</div>
<div>1306&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    boolean[] sampled) {</div>
<div>1307&emsp;&emsp;</div>
<div>1308&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return resampleWithWeights(random, weights, sampled, false);</div>
<div>1309&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1310&emsp;&emsp;</div>
<div>1311&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1312&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates a new dataset of the same size using random sampling with</div>
<div>1313&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * replacement according to the given weight vector. The weights of the</div>
<div>1314&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances in the new dataset are set to one. The length of the weight</div>
<div>1315&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * vector has to be the same as the number of instances in the dataset, and</div>
<div>1316&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * all weights have to be positive. Uses Walker's method, see pp. 232 of</div>
<div>1317&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * "Stochastic Simulation" by B.D. Ripley (1987).</div>
<div>1318&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1319&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random a random number generator</div>
<div>1320&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param weights the weight vector</div>
<div>1321&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param sampled an array indicating what has been sampled, can be null</div>
<div>1322&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param representUsingWeights if true, copies are represented using weights</div>
<div>1323&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *          in resampled data</div>
<div>1324&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the new dataset</div>
<div>1325&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the weights array is of the wrong</div>
<div>1326&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           length or contains negative weights.</div>
<div>1327&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1328&emsp;&emsp;&nbsp;&nbsp;  public Instances resampleWithWeights(Random random, double[] weights,</div>
<div>1329&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    boolean[] sampled, boolean representUsingWeights) {</div>
<div>1330&emsp;&emsp;</div>
<div>1331&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (weights.length != numInstances()) {</div>
<div>1332&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("weights.length != numInstances.");</div>
<div>1333&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1334&emsp;&emsp;</div>
<div>1335&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances newData = new Instances(this, numInstances());</div>
<div>1336&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (numInstances() == 0) {</div>
<div>1337&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return newData;</div>
<div>1338&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1339&emsp;&emsp;</div>
<div>1340&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Walker's method, see pp. 232 of "Stochastic Simulation" by B.D. Ripley</div>
<div>1341&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] P = new double[weights.length];</div>
<div>1342&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    System.arraycopy(weights, 0, P, 0, weights.length);</div>
<div>1343&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Utils.normalize(P);</div>
<div>1344&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] Q = new double[weights.length];</div>
<div>1345&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int[] A = new int[weights.length];</div>
<div>1346&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int[] W = new int[weights.length];</div>
<div>1347&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int M = weights.length;</div>
<div>1348&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int NN = -1;</div>
<div>1349&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int NP = M;</div>
<div>1350&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int I = 0; I &#60; M; I++) {</div>
<div>1351&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (P[I] &#60; 0) {</div>
<div>1352&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        throw new IllegalArgumentException("Weights have to be positive.");</div>
<div>1353&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1354&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Q[I] = M * P[I];</div>
<div>1355&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (Q[I] &#60; 1.0) {</div>
<div>1356&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        W[++NN] = I;</div>
<div>1357&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1358&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        W[--NP] = I;</div>
<div>1359&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1360&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1361&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (NN > -1 && NP &#60; M) {</div>
<div>1362&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (int S = 0; S &#60; M - 1; S++) {</div>
<div>1363&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        int I = W[S];</div>
<div>1364&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        int J = W[NP];</div>
<div>1365&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        A[I] = J;</div>
<div>1366&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Q[J] += Q[I] - 1.0;</div>
<div>1367&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (Q[J] &#60; 1.0) {</div>
<div>1368&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          NP++;</div>
<div>1369&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1370&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (NP >= M) {</div>
<div>1371&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          break;</div>
<div>1372&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1373&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1374&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // A[W[M]] = W[M];</div>
<div>1375&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1376&emsp;&emsp;</div>
<div>1377&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int I = 0; I &#60; M; I++) {</div>
<div>1378&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Q[I] += I;</div>
<div>1379&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1380&emsp;&emsp;</div>
<div>1381&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Do we need to keep track of how many copies to use?</div>
<div>1382&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int[] counts = null;</div>
<div>1383&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (representUsingWeights) {</div>
<div>1384&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      counts = new int[M];</div>
<div>1385&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1386&emsp;&emsp;</div>
<div>1387&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numInstances(); i++) {</div>
<div>1388&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      int ALRV;</div>
<div>1389&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      double U = M * random.nextDouble();</div>
<div>1390&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      int I = (int) U;</div>
<div>1391&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (U &#60; Q[I]) {</div>
<div>1392&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        ALRV = I;</div>
<div>1393&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1394&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        ALRV = A[I];</div>
<div>1395&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1396&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (representUsingWeights) {</div>
<div>1397&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        counts[ALRV]++;</div>
<div>1398&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1399&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newData.add(instance(ALRV));</div>
<div>1400&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1401&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (sampled != null) {</div>
<div>1402&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        sampled[ALRV] = true;</div>
<div>1403&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1404&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (!representUsingWeights) {</div>
<div>1405&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newData.instance(newData.numInstances() - 1).setWeight(1);</div>
<div>1406&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1407&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1408&emsp;&emsp;</div>
<div>1409&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Add data based on counts if weights should represent numbers of copies.</div>
<div>1410&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (representUsingWeights) {</div>
<div>1411&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (int i = 0; i &#60; counts.length; i++) {</div>
<div>1412&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (counts[i] > 0) {</div>
<div>1413&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          newData.add(instance(i));</div>
<div>1414&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          newData.instance(newData.numInstances() - 1).setWeight(counts[i]);</div>
<div>1415&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1416&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1417&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1418&emsp;&emsp;</div>
<div>1419&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return newData;</div>
<div>1420&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1421&emsp;&emsp;</div>
<div>1422&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1423&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Replaces the instance at the given position. Shallow copies instance before</div>
<div>1424&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * it is added. Does not check if the instance is compatible with the dataset.</div>
<div>1425&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Note: String or relational values are not transferred.</div>
<div>1426&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1427&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index position where instance is to be inserted</div>
<div>1428&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param instance the instance to be inserted</div>
<div>1429&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the instance previously at that position</div>
<div>1430&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1431&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index;</div>
<div>1432&emsp;&emsp;&nbsp;&nbsp;  // @ requires index &#60; m_Instances.size();</div>
<div>1433&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>1434&emsp;&emsp;&nbsp;&nbsp;  public Instance set(int index, /* @non_null@ */Instance instance) {</div>
<div>1435&emsp;&emsp;</div>
<div>1436&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance newInstance = (Instance) instance.copy();</div>
<div>1437&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance oldInstance = m_Instances.get(index);</div>
<div>1438&emsp;&emsp;</div>
<div>1439&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    newInstance.setDataset(this);</div>
<div>1440&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances.set(index, newInstance);</div>
<div>1441&emsp;&emsp;</div>
<div>1442&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return oldInstance;</div>
<div>1443&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1444&emsp;&emsp;</div>
<div>1445&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1446&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sets the class attribute.</div>
<div>1447&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1448&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att attribute to be the class</div>
<div>1449&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1450&emsp;&emsp;&nbsp;&nbsp;  public void setClass(Attribute att) {</div>
<div>1451&emsp;&emsp;</div>
<div>1452&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_ClassIndex = att.index();</div>
<div>1453&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1454&emsp;&emsp;</div>
<div>1455&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1456&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sets the class index of the set. If the class index is negative there is</div>
<div>1457&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * assumed to be no class. (ie. it is undefined)</div>
<div>1458&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1459&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param classIndex the new class index (index starts with 0)</div>
<div>1460&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the class index is too big or &#60; 0</div>
<div>1461&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1462&emsp;&emsp;&nbsp;&nbsp;  public void setClassIndex(int classIndex) {</div>
<div>1463&emsp;&emsp;</div>
<div style="background-color:limegreen;">1464&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (classIndex >= numAttributes()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1465&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Invalid class index: " + classIndex);</div>
<div>1466&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1467&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_ClassIndex = classIndex;</div>
<div>1468&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1469&emsp;&emsp;</div>
<div>1470&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1471&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sets the relation's name.</div>
<div>1472&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1473&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param newName the new relation name.</div>
<div>1474&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1475&emsp;&emsp;&nbsp;&nbsp;  public void setRelationName(/* @non_null@ */String newName) {</div>
<div>1476&emsp;&emsp;</div>
<div>1477&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_RelationName = newName;</div>
<div>1478&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1479&emsp;&emsp;</div>
<div>1480&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1481&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sorts a nominal attribute (stable, linear-time sort). Instances</div>
<div>1482&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * are sorted based on the attribute label ordering specified in the header.  </div>
<div>1483&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1484&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the attribute's index (index starts with 0)</div>
<div>1485&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1486&emsp;&emsp;&nbsp;&nbsp;  protected void sortBasedOnNominalAttribute(int attIndex) {</div>
<div>1487&emsp;&emsp;</div>
<div>1488&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Figure out number of instances for each attribute value</div>
<div>1489&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // and store original list of instances away</div>
<div>1490&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int[] counts = new int[attribute(attIndex).numValues()];</div>
<div>1491&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance[] backup = new Instance[numInstances()];</div>
<div>1492&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int j = 0;</div>
<div style="background-color:limegreen;">1493&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (Instance inst : this) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1494&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      backup[j++] = inst;</div>
<div style="background-color:limegreen;">1495&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (!inst.isMissing(attIndex)) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1496&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        counts[(int)inst.value(attIndex)]++;</div>
<div>1497&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1498&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1499&emsp;&emsp;</div>
<div>1500&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Indices to figure out where to add instances</div>
<div>1501&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int[] indices = new int[counts.length];</div>
<div>1502&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int start = 0;</div>
<div style="background-color:limegreen;">1503&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; counts.length; i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1504&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      indices[i] = start;</div>
<div>1505&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      start += counts[i];</div>
<div>1506&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">1507&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (Instance inst : backup) { // Use backup here&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div style="background-color:limegreen;">1508&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (!inst.isMissing(attIndex)) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1509&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        m_Instances.set(indices[(int)inst.value(attIndex)]++, inst);</div>
<div>1510&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1511&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        m_Instances.set(start++, inst);</div>
<div>1512&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1513&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1514&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1515&emsp;&emsp;</div>
<div>1516&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1517&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sorts the instances based on an attribute. For numeric attributes,</div>
<div>1518&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances are sorted in ascending order. For nominal attributes, instances</div>
<div>1519&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * are sorted based on the attribute label ordering specified in the header.</div>
<div>1520&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Instances with missing values for the attribute are placed at the end of</div>
<div>1521&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the dataset.</div>
<div>1522&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1523&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the attribute's index (index starts with 0)</div>
<div>1524&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1525&emsp;&emsp;&nbsp;&nbsp;  public void sort(int attIndex) {</div>
<div>1526&emsp;&emsp;</div>
<div style="background-color:limegreen;">1527&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (!attribute(attIndex).isNominal()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1528&emsp;&emsp;</div>
<div>1529&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Use quicksort from Utils class for sorting</div>
<div>1530&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      double[] vals = new double[numInstances()];</div>
<div>1531&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Instance[] backup = new Instance[vals.length];</div>
<div style="background-color:limegreen;">1532&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      for (int i = 0; i &#60; vals.length; i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1533&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Instance inst = instance(i);</div>
<div>1534&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        backup[i] = inst;</div>
<div>1535&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        double val = inst.value(attIndex);</div>
<div style="background-color:limegreen;">1536&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>        if (Utils.isMissingValue(val)) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1537&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          vals[i] = Double.MAX_VALUE;</div>
<div>1538&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        } else {</div>
<div>1539&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          vals[i] = val;</div>
<div>1540&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1541&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1542&emsp;&emsp;</div>
<div>1543&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      int[] sortOrder = Utils.sortWithNoMissingValues(vals);</div>
<div style="background-color:limegreen;">1544&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      for (int i = 0; i &#60; vals.length; i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1545&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        m_Instances.set(i, backup[sortOrder[i]]);</div>
<div>1546&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1547&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>1548&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      sortBasedOnNominalAttribute(attIndex);</div>
<div>1549&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1550&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1551&emsp;&emsp;</div>
<div>1552&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1553&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sorts the instances based on an attribute. For numeric attributes,</div>
<div>1554&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances are sorted into ascending order. For nominal attributes,</div>
<div>1555&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances are sorted based on the attribute label ordering specified in the</div>
<div>1556&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * header. Instances with missing values for the attribute are placed at the</div>
<div>1557&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * end of the dataset.</div>
<div>1558&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1559&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute</div>
<div>1560&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1561&emsp;&emsp;&nbsp;&nbsp;  public void sort(Attribute att) {</div>
<div>1562&emsp;&emsp;</div>
<div>1563&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    sort(att.index());</div>
<div>1564&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1565&emsp;&emsp;</div>
<div>1566&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1567&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sorts the instances based on an attribute, using a stable sort. For numeric attributes,</div>
<div>1568&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances are sorted in ascending order. For nominal attributes, instances</div>
<div>1569&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * are sorted based on the attribute label ordering specified in the header.</div>
<div>1570&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Instances with missing values for the attribute are placed at the end of</div>
<div>1571&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the dataset.</div>
<div>1572&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1573&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the attribute's index (index starts with 0)</div>
<div>1574&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1575&emsp;&emsp;&nbsp;&nbsp;  public void stableSort(int attIndex) {</div>
<div>1576&emsp;&emsp;</div>
<div>1577&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (!attribute(attIndex).isNominal()) {</div>
<div>1578&emsp;&emsp;</div>
<div>1579&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Use quicksort from Utils class for sorting</div>
<div>1580&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      double[] vals = new double[numInstances()];</div>
<div>1581&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Instance[] backup = new Instance[vals.length];</div>
<div>1582&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (int i = 0; i &#60; vals.length; i++) {</div>
<div>1583&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Instance inst = instance(i);</div>
<div>1584&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        backup[i] = inst;</div>
<div>1585&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        vals[i] = inst.value(attIndex);</div>
<div>1586&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1587&emsp;&emsp;</div>
<div>1588&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      int[] sortOrder = Utils.stableSort(vals);</div>
<div>1589&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (int i = 0; i &#60; vals.length; i++) {</div>
<div>1590&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        m_Instances.set(i, backup[sortOrder[i]]);</div>
<div>1591&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1592&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>1593&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      sortBasedOnNominalAttribute(attIndex);</div>
<div>1594&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1595&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1596&emsp;&emsp;</div>
<div>1597&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1598&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Sorts the instances based on an attribute, using a stable sort. For numeric attributes,</div>
<div>1599&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances are sorted into ascending order. For nominal attributes,</div>
<div>1600&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances are sorted based on the attribute label ordering specified in the</div>
<div>1601&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * header. Instances with missing values for the attribute are placed at the</div>
<div>1602&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * end of the dataset.</div>
<div>1603&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1604&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the attribute</div>
<div>1605&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1606&emsp;&emsp;&nbsp;&nbsp;  public void stableSort(Attribute att) {</div>
<div>1607&emsp;&emsp;</div>
<div>1608&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    stableSort(att.index());</div>
<div>1609&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1610&emsp;&emsp;</div>
<div>1611&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1612&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Stratifies a set of instances according to its class values if the class</div>
<div>1613&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * attribute is nominal (so that afterwards a stratified cross-validation can</div>
<div>1614&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * be performed).</div>
<div>1615&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1616&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFolds the number of folds in the cross-validation</div>
<div>1617&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws UnassignedClassException if the class is not set</div>
<div>1618&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1619&emsp;&emsp;&nbsp;&nbsp;  public void stratify(int numFolds) {</div>
<div>1620&emsp;&emsp;</div>
<div style="background-color:limegreen;">1621&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (numFolds &#60;= 1) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1622&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(</div>
<div>1623&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        "Number of folds must be greater than 1");</div>
<div>1624&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">1625&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (m_ClassIndex &#60; 0) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1626&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new UnassignedClassException("Class index is negative (not set)!");</div>
<div>1627&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">1628&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (classAttribute().isNominal()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1629&emsp;&emsp;</div>
<div>1630&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // sort by class</div>
<div>1631&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      int index = 1;</div>
<div style="background-color:limegreen;">1632&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      while (index &#60; numInstances()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1633&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Instance instance1 = instance(index - 1);</div>
<div style="background-color:limegreen;">1634&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>        for (int j = index; j &#60; numInstances(); j++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1635&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          Instance instance2 = instance(j);</div>
<div style="background-color:limegreen;">1636&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>          if ((instance1.classValue() == instance2.classValue())&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div style="background-color:limegreen;">1637&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>            || (instance1.classIsMissing() && instance2.classIsMissing())) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES] & [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1638&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            swap(index, j);</div>
<div>1639&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            index++;</div>
<div>1640&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          }</div>
<div>1641&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1642&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        index++;</div>
<div>1643&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1644&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      stratStep(numFolds);</div>
<div>1645&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1646&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1647&emsp;&emsp;</div>
<div>1648&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1649&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Computes the sum of all the instances' weights.</div>
<div>1650&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1651&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the sum of all the instances' weights as a double</div>
<div>1652&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1653&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */double sumOfWeights() {</div>
<div>1654&emsp;&emsp;</div>
<div>1655&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double sum = 0;</div>
<div>1656&emsp;&emsp;</div>
<div style="background-color:limegreen;">1657&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; numInstances(); i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1658&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      sum += instance(i).weight();</div>
<div>1659&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1660&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return sum;</div>
<div>1661&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1662&emsp;&emsp;</div>
<div>1663&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1664&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates the test set for one fold of a cross-validation on the dataset.</div>
<div>1665&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1666&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFolds the number of folds in the cross-validation. Must be</div>
<div>1667&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *          greater than 1.</div>
<div>1668&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFold 0 for the first fold, 1 for the second, ...</div>
<div>1669&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the test set as a set of weighted instances</div>
<div>1670&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the number of folds is less than 2 or</div>
<div>1671&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           greater than the number of instances.</div>
<div>1672&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1673&emsp;&emsp;&nbsp;&nbsp;  // @ requires 2 &#60;= numFolds && numFolds &#60; numInstances();</div>
<div>1674&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= numFold && numFold &#60; numFolds;</div>
<div>1675&emsp;&emsp;&nbsp;&nbsp;  public Instances testCV(int numFolds, int numFold) {</div>
<div>1676&emsp;&emsp;</div>
<div>1677&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int numInstForFold, first, offset;</div>
<div>1678&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances test;</div>
<div>1679&emsp;&emsp;</div>
<div style="background-color:limegreen;">1680&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (numFolds &#60; 2) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1681&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Number of folds must be at least 2!");</div>
<div>1682&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">1683&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (numFolds > numInstances()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1684&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(</div>
<div>1685&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        "Can't have more folds than instances!");</div>
<div>1686&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1687&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    numInstForFold = numInstances() / numFolds;</div>
<div style="background-color:limegreen;">1688&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (numFold &#60; numInstances() % numFolds) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1689&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      numInstForFold++;</div>
<div>1690&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      offset = numFold;</div>
<div>1691&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>1692&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      offset = numInstances() % numFolds;</div>
<div>1693&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1694&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    test = new Instances(this, numInstForFold);</div>
<div>1695&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    first = numFold * (numInstances() / numFolds) + offset;</div>
<div>1696&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    copyInstances(first, test, numInstForFold);</div>
<div>1697&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return test;</div>
<div>1698&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1699&emsp;&emsp;</div>
<div>1700&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1701&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the dataset as a string in ARFF format. Strings are quoted if they</div>
<div>1702&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * contain whitespace characters, or if they are a question mark.</div>
<div>1703&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1704&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the dataset in ARFF format as a string</div>
<div>1705&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1706&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>1707&emsp;&emsp;&nbsp;&nbsp;  public String toString() {</div>
<div>1708&emsp;&emsp;</div>
<div>1709&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    StringBuffer text = new StringBuffer();</div>
<div>1710&emsp;&emsp;</div>
<div>1711&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    text.append(ARFF_RELATION).append(" ").append(Utils.quote(m_RelationName))</div>
<div>1712&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    .append("\n\n");</div>
<div style="background-color:limegreen;">1713&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; numAttributes(); i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1714&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      text.append(attribute(i)).append("\n");</div>
<div>1715&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1716&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    text.append("\n").append(ARFF_DATA).append("\n");</div>
<div>1717&emsp;&emsp;</div>
<div>1718&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    text.append(stringWithoutHeader());</div>
<div>1719&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return text.toString();</div>
<div>1720&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1721&emsp;&emsp;</div>
<div>1722&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1723&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the instances in the dataset as a string in ARFF format. Strings</div>
<div>1724&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * are quoted if they contain whitespace characters, or if they are a question</div>
<div>1725&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * mark.</div>
<div>1726&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1727&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the dataset in ARFF format as a string</div>
<div>1728&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1729&emsp;&emsp;&nbsp;&nbsp;  protected String stringWithoutHeader() {</div>
<div>1730&emsp;&emsp;</div>
<div>1731&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    StringBuffer text = new StringBuffer();</div>
<div>1732&emsp;&emsp;</div>
<div style="background-color:limegreen;">1733&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; numInstances(); i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1734&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      text.append(instance(i));</div>
<div style="background-color:limegreen;">1735&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      if (i &#60; numInstances() - 1) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1736&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        text.append('\n');</div>
<div>1737&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1738&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1739&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return text.toString();</div>
<div>1740&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1741&emsp;&emsp;</div>
<div>1742&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1743&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates the training set for one fold of a cross-validation on the dataset.</div>
<div>1744&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1745&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFolds the number of folds in the cross-validation. Must be</div>
<div>1746&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *          greater than 1.</div>
<div>1747&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFold 0 for the first fold, 1 for the second, ...</div>
<div>1748&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the training set</div>
<div>1749&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the number of folds is less than 2 or</div>
<div>1750&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           greater than the number of instances.</div>
<div>1751&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1752&emsp;&emsp;&nbsp;&nbsp;  // @ requires 2 &#60;= numFolds && numFolds &#60; numInstances();</div>
<div>1753&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= numFold && numFold &#60; numFolds;</div>
<div>1754&emsp;&emsp;&nbsp;&nbsp;  public Instances trainCV(int numFolds, int numFold) {</div>
<div>1755&emsp;&emsp;</div>
<div>1756&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int numInstForFold, first, offset;</div>
<div>1757&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances train;</div>
<div>1758&emsp;&emsp;</div>
<div style="background-color:limegreen;">1759&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (numFolds &#60; 2) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1760&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException("Number of folds must be at least 2!");</div>
<div>1761&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div style="background-color:limegreen;">1762&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (numFolds > numInstances()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1763&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(</div>
<div>1764&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        "Can't have more folds than instances!");</div>
<div>1765&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1766&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    numInstForFold = numInstances() / numFolds;</div>
<div style="background-color:limegreen;">1767&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    if (numFold &#60; numInstances() % numFolds) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1768&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      numInstForFold++;</div>
<div>1769&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      offset = numFold;</div>
<div>1770&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>1771&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      offset = numInstances() % numFolds;</div>
<div>1772&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1773&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    train = new Instances(this, numInstances() - numInstForFold);</div>
<div>1774&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    first = numFold * (numInstances() / numFolds) + offset;</div>
<div>1775&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    copyInstances(0, train, first);</div>
<div>1776&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    copyInstances(first + numInstForFold, train, numInstances() - first</div>
<div>1777&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      - numInstForFold);</div>
<div>1778&emsp;&emsp;</div>
<div>1779&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return train;</div>
<div>1780&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1781&emsp;&emsp;</div>
<div>1782&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1783&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Creates the training set for one fold of a cross-validation on the dataset.</div>
<div>1784&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * The data is subsequently randomized based on the given random number</div>
<div>1785&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * generator.</div>
<div>1786&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1787&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFolds the number of folds in the cross-validation. Must be</div>
<div>1788&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *          greater than 1.</div>
<div>1789&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFold 0 for the first fold, 1 for the second, ...</div>
<div>1790&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param random the random number generator</div>
<div>1791&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the training set</div>
<div>1792&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the number of folds is less than 2 or</div>
<div>1793&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *           greater than the number of instances.</div>
<div>1794&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1795&emsp;&emsp;&nbsp;&nbsp;  // @ requires 2 &#60;= numFolds && numFolds &#60; numInstances();</div>
<div>1796&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= numFold && numFold &#60; numFolds;</div>
<div>1797&emsp;&emsp;&nbsp;&nbsp;  public Instances trainCV(int numFolds, int numFold, Random random) {</div>
<div>1798&emsp;&emsp;</div>
<div>1799&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances train = trainCV(numFolds, numFold);</div>
<div>1800&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    train.randomize(random);</div>
<div>1801&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return train;</div>
<div>1802&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1803&emsp;&emsp;</div>
<div>1804&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1805&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Computes the variance for all numeric attributes simultaneously.</div>
<div>1806&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * This is faster than calling variance() for each attribute.</div>
<div>1807&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * The resulting array has as many dimensions as there are attributes.</div>
<div>1808&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Array elements corresponding to non-numeric attributes are set to 0.</div>
<div>1809&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1810&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the array containing the variance values</div>
<div>1811&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1812&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */double[] variances() {</div>
<div>1813&emsp;&emsp;</div>
<div>1814&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] vars = new double[numAttributes()];</div>
<div>1815&emsp;&emsp;</div>
<div>1816&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numAttributes(); i++)</div>
<div>1817&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      vars[i] = Double.NaN;</div>
<div>1818&emsp;&emsp;</div>
<div>1819&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] means = new double[numAttributes()];</div>
<div>1820&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] sumWeights = new double[numAttributes()];</div>
<div>1821&emsp;&emsp;</div>
<div>1822&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numInstances(); i++) {</div>
<div>1823&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      double weight = instance(i).weight();</div>
<div>1824&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (int attIndex = 0; attIndex &#60; numAttributes(); attIndex++) {</div>
<div>1825&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (attribute(attIndex).isNumeric()) {</div>
<div>1826&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          if (!instance(i).isMissing(attIndex)) {</div>
<div>1827&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            double value = instance(i).value(attIndex);</div>
<div>1828&emsp;&emsp;</div>
<div>1829&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            if (Double.isNaN(vars[attIndex])) {</div>
<div>1830&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              // For the first value the mean can suffer from loss of precision</div>
<div>1831&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              // so we treat it separately and make sure the calculation stays accurate</div>
<div>1832&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              means[attIndex] = value;</div>
<div>1833&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              sumWeights[attIndex] = weight;</div>
<div>1834&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              vars[attIndex] = 0;</div>
<div>1835&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              continue;</div>
<div>1836&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            }</div>
<div>1837&emsp;&emsp;</div>
<div>1838&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            double delta = weight*(value - means[attIndex]);</div>
<div>1839&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            sumWeights[attIndex] += weight;</div>
<div>1840&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            means[attIndex] += delta/sumWeights[attIndex];</div>
<div>1841&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            vars[attIndex] += delta*(value - means[attIndex]);</div>
<div>1842&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          }</div>
<div>1843&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1844&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1845&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1846&emsp;&emsp;</div>
<div>1847&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int attIndex = 0; attIndex &#60; numAttributes(); attIndex++) {</div>
<div>1848&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (attribute(attIndex).isNumeric()) {</div>
<div>1849&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (sumWeights[attIndex] &#60;= 1) {</div>
<div>1850&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          vars[attIndex] = Double.NaN;</div>
<div>1851&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        } else {</div>
<div>1852&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          vars[attIndex] /= sumWeights[attIndex] - 1;</div>
<div>1853&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          if (vars[attIndex] &#60; 0)</div>
<div>1854&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            vars[attIndex] = 0;</div>
<div>1855&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1856&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1857&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1858&emsp;&emsp;</div>
<div>1859&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return vars;</div>
<div>1860&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1861&emsp;&emsp;</div>
<div>1862&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1863&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Computes the variance for a numeric attribute.</div>
<div>1864&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1865&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param attIndex the numeric attribute (index starts with 0)</div>
<div>1866&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the variance if the attribute is numeric</div>
<div>1867&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the attribute is not numeric</div>
<div>1868&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1869&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */double variance(int attIndex) {</div>
<div>1870&emsp;&emsp;</div>
<div>1871&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (!attribute(attIndex).isNumeric()) {</div>
<div>1872&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(</div>
<div>1873&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        "Can't compute variance because attribute is " + "not numeric!");</div>
<div>1874&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1875&emsp;&emsp;</div>
<div>1876&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double mean = 0;</div>
<div>1877&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double var = Double.NaN;</div>
<div>1878&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double sumWeights = 0;</div>
<div>1879&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numInstances(); i++) {</div>
<div>1880&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (!instance(i).isMissing(attIndex)) {</div>
<div>1881&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        double weight = instance(i).weight();</div>
<div>1882&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        double value = instance(i).value(attIndex);</div>
<div>1883&emsp;&emsp;</div>
<div>1884&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (Double.isNaN(var)) {</div>
<div>1885&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // For the first value the mean can suffer from loss of precision</div>
<div>1886&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // so we treat it separately and make sure the calculation stays accurate</div>
<div>1887&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          mean = value;</div>
<div>1888&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          sumWeights = weight;</div>
<div>1889&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          var = 0;</div>
<div>1890&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          continue;</div>
<div>1891&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1892&emsp;&emsp;</div>
<div>1893&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        double delta = weight*(value - mean);</div>
<div>1894&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        sumWeights += weight;</div>
<div>1895&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        mean += delta/sumWeights;</div>
<div>1896&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        var += delta*(value - mean);</div>
<div>1897&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1898&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1899&emsp;&emsp;</div>
<div>1900&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (sumWeights &#60;= 1) {</div>
<div>1901&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return Double.NaN;</div>
<div>1902&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1903&emsp;&emsp;</div>
<div>1904&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    var /= sumWeights - 1;</div>
<div>1905&emsp;&emsp;</div>
<div>1906&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // We don't like negative variance</div>
<div>1907&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (var &#60; 0) {</div>
<div>1908&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return 0;</div>
<div>1909&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } else {</div>
<div>1910&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      return var;</div>
<div>1911&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1912&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1913&emsp;&emsp;</div>
<div>1914&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1915&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Computes the variance for a numeric attribute.</div>
<div>1916&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1917&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param att the numeric attribute</div>
<div>1918&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the variance if the attribute is numeric</div>
<div>1919&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the attribute is not numeric</div>
<div>1920&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1921&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */double variance(Attribute att) {</div>
<div>1922&emsp;&emsp;</div>
<div>1923&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return variance(att.index());</div>
<div>1924&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1925&emsp;&emsp;</div>
<div>1926&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1927&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Calculates summary statistics on the values that appear in this set of</div>
<div>1928&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * instances for a specified attribute.</div>
<div>1929&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1930&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index the index of the attribute to summarize (index starts with 0)</div>
<div>1931&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return an AttributeStats object with it's fields calculated.</div>
<div>1932&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1933&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index && index &#60; numAttributes();</div>
<div>1934&emsp;&emsp;&nbsp;&nbsp;  public AttributeStats attributeStats(int index) {</div>
<div>1935&emsp;&emsp;</div>
<div>1936&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    AttributeStats result = new AttributeStats();</div>
<div>1937&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (attribute(index).isNominal()) {</div>
<div>1938&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.nominalCounts = new int[attribute(index).numValues()];</div>
<div>1939&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.nominalWeights = new double[attribute(index).numValues()];</div>
<div>1940&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1941&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (attribute(index).isNumeric()) {</div>
<div>1942&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.numericStats = new weka.experiment.Stats();</div>
<div>1943&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1944&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.totalCount = numInstances();</div>
<div>1945&emsp;&emsp;</div>
<div>1946&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    HashMap&#60;Double,double[]> map = new HashMap&#60;Double,double[]>(2 * result.totalCount);</div>
<div>1947&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (Instance current : this) {</div>
<div>1948&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      double key = current.value(index);</div>
<div>1949&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (Utils.isMissingValue(key)) {</div>
<div>1950&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.missingCount++;</div>
<div>1951&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      } else {</div>
<div>1952&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        double[] values = map.get(key);</div>
<div>1953&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (values == null) {</div>
<div>1954&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          values = new double[2];</div>
<div>1955&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          values[0] = 1.0;</div>
<div>1956&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          values[1] = current.weight();</div>
<div>1957&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          map.put(key, values);</div>
<div>1958&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        } else {</div>
<div>1959&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          values[0]++;</div>
<div>1960&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          values[1] += current.weight();</div>
<div>1961&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>1962&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>1963&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1964&emsp;&emsp;</div>
<div>1965&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (Entry&#60;Double, double[]> entry : map.entrySet()) {</div>
<div>1966&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.addDistinct(entry.getKey(), (int)entry.getValue()[0], entry.getValue()[1]);</div>
<div>1967&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1968&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return result;</div>
<div>1969&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1970&emsp;&emsp;</div>
<div>1971&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1972&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Gets the value of all instances in this dataset for a particular attribute.</div>
<div>1973&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Useful in conjunction with Utils.sort to allow iterating through the</div>
<div>1974&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * dataset in sorted order for some attribute.</div>
<div>1975&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1976&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param index the index of the attribute.</div>
<div>1977&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return an array containing the value of the desired attribute for each</div>
<div>1978&emsp;&emsp;&nbsp;&nbsp;&nbsp;   *         instance in the dataset.</div>
<div>1979&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1980&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= index && index &#60; numAttributes();</div>
<div>1981&emsp;&emsp;&nbsp;&nbsp;  public/* @pure@ */double[] attributeToDoubleArray(int index) {</div>
<div>1982&emsp;&emsp;</div>
<div>1983&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    double[] result = new double[numInstances()];</div>
<div style="background-color:limegreen;">1984&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; result.length; i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>1985&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result[i] = instance(i).value(index);</div>
<div>1986&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>1987&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return result;</div>
<div>1988&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>1989&emsp;&emsp;</div>
<div>1990&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>1991&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Generates a string summarizing the set of instances. Gives a breakdown for</div>
<div>1992&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * each attribute indicating the number of missing/discrete/unique values and</div>
<div>1993&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * other information.</div>
<div>1994&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>1995&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return a string summarizing the dataset</div>
<div>1996&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>1997&emsp;&emsp;&nbsp;&nbsp;  public String toSummaryString() {</div>
<div>1998&emsp;&emsp;</div>
<div>1999&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    StringBuffer result = new StringBuffer();</div>
<div>2000&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append("Relation Name:  ").append(relationName()).append('\n');</div>
<div>2001&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append("Num Instances:  ").append(numInstances()).append('\n');</div>
<div>2002&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append("Num Attributes: ").append(numAttributes()).append('\n');</div>
<div>2003&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append('\n');</div>
<div>2004&emsp;&emsp;</div>
<div>2005&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append(Utils.padLeft("", 5)).append(Utils.padRight("Name", 25));</div>
<div>2006&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append(Utils.padLeft("Type", 5)).append(Utils.padLeft("Nom", 5));</div>
<div>2007&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append(Utils.padLeft("Int", 5)).append(Utils.padLeft("Real", 5));</div>
<div>2008&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append(Utils.padLeft("Missing", 12));</div>
<div>2009&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append(Utils.padLeft("Unique", 12));</div>
<div>2010&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    result.append(Utils.padLeft("Dist", 6)).append('\n');</div>
<div>2011&emsp;&emsp;</div>
<div>2012&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Figure out how many digits we need for the index</div>
<div>2013&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int numDigits = (int)Math.log10((int)numAttributes()) + 1;</div>
<div>2014&emsp;&emsp;</div>
<div>2015&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numAttributes(); i++) {</div>
<div>2016&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute a = attribute(i);</div>
<div>2017&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      AttributeStats as = attributeStats(i);</div>
<div>2018&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append(Utils.padLeft("" + (i + 1), numDigits)).append(' ');</div>
<div>2019&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append(Utils.padRight(a.name(), 25)).append(' ');</div>
<div>2020&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      long percent;</div>
<div>2021&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      switch (a.type()) {</div>
<div>2022&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      case Attribute.NOMINAL:</div>
<div>2023&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("Nom", 4)).append(' ');</div>
<div>2024&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.intCount / as.totalCount);</div>
<div>2025&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2026&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + 0, 3)).append("% ");</div>
<div>2027&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.realCount / as.totalCount);</div>
<div>2028&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2029&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        break;</div>
<div>2030&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      case Attribute.NUMERIC:</div>
<div>2031&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("Num", 4)).append(' ');</div>
<div>2032&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + 0, 3)).append("% ");</div>
<div>2033&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.intCount / as.totalCount);</div>
<div>2034&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2035&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.realCount / as.totalCount);</div>
<div>2036&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2037&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        break;</div>
<div>2038&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      case Attribute.DATE:</div>
<div>2039&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("Dat", 4)).append(' ');</div>
<div>2040&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + 0, 3)).append("% ");</div>
<div>2041&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.intCount / as.totalCount);</div>
<div>2042&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2043&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.realCount / as.totalCount);</div>
<div>2044&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2045&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        break;</div>
<div>2046&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      case Attribute.STRING:</div>
<div>2047&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("Str", 4)).append(' ');</div>
<div>2048&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.intCount / as.totalCount);</div>
<div>2049&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2050&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + 0, 3)).append("% ");</div>
<div>2051&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.realCount / as.totalCount);</div>
<div>2052&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2053&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        break;</div>
<div>2054&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      case Attribute.RELATIONAL:</div>
<div>2055&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("Rel", 4)).append(' ');</div>
<div>2056&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.intCount / as.totalCount);</div>
<div>2057&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2058&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + 0, 3)).append("% ");</div>
<div>2059&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.realCount / as.totalCount);</div>
<div>2060&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2061&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        break;</div>
<div>2062&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      default:</div>
<div>2063&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("???", 4)).append(' ');</div>
<div>2064&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + 0, 3)).append("% ");</div>
<div>2065&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.intCount / as.totalCount);</div>
<div>2066&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2067&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        percent = Math.round(100.0 * as.realCount / as.totalCount);</div>
<div>2068&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2069&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        break;</div>
<div>2070&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2071&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append(Utils.padLeft("" + as.missingCount, 5)).append(" /");</div>
<div>2072&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      percent = Math.round(100.0 * as.missingCount / as.totalCount);</div>
<div>2073&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2074&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append(Utils.padLeft("" + as.uniqueCount, 5)).append(" /");</div>
<div>2075&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      percent = Math.round(100.0 * as.uniqueCount / as.totalCount);</div>
<div>2076&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append(Utils.padLeft("" + percent, 3)).append("% ");</div>
<div>2077&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append(Utils.padLeft("" + as.distinctCount, 5)).append(' ');</div>
<div>2078&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      result.append('\n');</div>
<div>2079&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2080&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return result.toString();</div>
<div>2081&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2082&emsp;&emsp;</div>
<div>2083&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2084&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Copies instances from one set to the end of another one.</div>
<div>2085&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2086&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param from the position of the first instance to be copied</div>
<div>2087&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param dest the destination for the instances</div>
<div>2088&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param num the number of instances to be copied</div>
<div>2089&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2090&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= from && from &#60;= numInstances() - num;</div>
<div>2091&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= num;</div>
<div>2092&emsp;&emsp;&nbsp;&nbsp;  protected void copyInstances(int from, /* @non_null@ */Instances dest, int num) {</div>
<div>2093&emsp;&emsp;</div>
<div style="background-color:limegreen;">2094&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    for (int i = 0; i &#60; num; i++) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>2095&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      dest.add(instance(from + i));</div>
<div>2096&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2097&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2098&emsp;&emsp;</div>
<div>2099&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2100&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns string including all instances, their weights and their indices in</div>
<div>2101&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the original dataset.</div>
<div>2102&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2103&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return description of instance and its weight as a string</div>
<div>2104&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2105&emsp;&emsp;&nbsp;&nbsp;  protected/* @pure@ */String instancesAndWeights() {</div>
<div>2106&emsp;&emsp;</div>
<div>2107&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    StringBuffer text = new StringBuffer();</div>
<div>2108&emsp;&emsp;</div>
<div>2109&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; numInstances(); i++) {</div>
<div>2110&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      text.append(instance(i) + " " + instance(i).weight());</div>
<div>2111&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (i &#60; numInstances() - 1) {</div>
<div>2112&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        text.append("\n");</div>
<div>2113&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2114&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2115&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return text.toString();</div>
<div>2116&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2117&emsp;&emsp;</div>
<div>2118&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2119&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Help function needed for stratification of set.</div>
<div>2120&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2121&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param numFolds the number of folds for the stratification</div>
<div>2122&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2123&emsp;&emsp;&nbsp;&nbsp;  protected void stratStep(int numFolds) {</div>
<div>2124&emsp;&emsp;</div>
<div>2125&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Instance> newVec = new ArrayList&#60;Instance>(m_Instances.size());</div>
<div>2126&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int start = 0, j;</div>
<div>2127&emsp;&emsp;</div>
<div>2128&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // create stratified batch</div>
<div style="background-color:limegreen;">2129&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>    while (newVec.size() &#60; numInstances()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>2130&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      j = start;</div>
<div style="background-color:limegreen;">2131&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>      while (j &#60; numInstances()) {&nbsp;&#8594; [OPTIMIZATIONS, BATCHSIZE, NUMDECIMAL, PRUNE, SEED, CHECKERROR, MINNO, DEBUG, FOLDS, NOCHECKCAPABILITIES]</b></div>
<div>2132&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        newVec.add(instance(j));</div>
<div>2133&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        j = j + numFolds;</div>
<div>2134&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2135&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      start++;</div>
<div>2136&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2137&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances = newVec;</div>
<div>2138&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2139&emsp;&emsp;</div>
<div>2140&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2141&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Swaps two instances in the set.</div>
<div>2142&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2143&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param i the first instance's index (index starts with 0)</div>
<div>2144&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param j the second instance's index (index starts with 0)</div>
<div>2145&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2146&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= i && i &#60; numInstances();</div>
<div>2147&emsp;&emsp;&nbsp;&nbsp;  // @ requires 0 &#60;= j && j &#60; numInstances();</div>
<div>2148&emsp;&emsp;&nbsp;&nbsp;  public void swap(int i, int j) {</div>
<div>2149&emsp;&emsp;</div>
<div>2150&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instance in = m_Instances.get(i);</div>
<div>2151&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances.set(i, m_Instances.get(j));</div>
<div>2152&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    m_Instances.set(j, in);</div>
<div>2153&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2154&emsp;&emsp;</div>
<div>2155&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2156&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Merges two sets of Instances together. The resulting set will have all the</div>
<div>2157&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * attributes of the first set plus all the attributes of the second set. The</div>
<div>2158&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * number of instances in both sets must be the same.</div>
<div>2159&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2160&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param first the first set of Instances</div>
<div>2161&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param second the second set of Instances</div>
<div>2162&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the merged set of Instances</div>
<div>2163&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @throws IllegalArgumentException if the datasets are not the same size</div>
<div>2164&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2165&emsp;&emsp;&nbsp;&nbsp;  public static Instances mergeInstances(Instances first, Instances second) {</div>
<div>2166&emsp;&emsp;</div>
<div>2167&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    if (first.numInstances() != second.numInstances()) {</div>
<div>2168&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      throw new IllegalArgumentException(</div>
<div>2169&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        "Instance sets must be of the same size");</div>
<div>2170&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2171&emsp;&emsp;</div>
<div>2172&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Create the vector of merged attributes</div>
<div>2173&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> newAttributes = new ArrayList&#60;Attribute>(first.numAttributes() +</div>
<div>2174&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      second.numAttributes());</div>
<div>2175&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (Attribute att : first.m_Attributes) {</div>
<div>2176&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newAttributes.add(att);</div>
<div>2177&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2178&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (Attribute att : second.m_Attributes) {</div>
<div>2179&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      newAttributes.add((Attribute)att.copy()); // Need to copy because indices will change.</div>
<div>2180&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2181&emsp;&emsp;</div>
<div>2182&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Create the set of Instances</div>
<div>2183&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances merged = new Instances(first.relationName() + '_'</div>
<div>2184&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      + second.relationName(), newAttributes, first.numInstances());</div>
<div>2185&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    // Merge each instance</div>
<div>2186&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    for (int i = 0; i &#60; first.numInstances(); i++) {</div>
<div>2187&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      merged.add(first.instance(i).mergeInstance(second.instance(i)));</div>
<div>2188&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2189&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return merged;</div>
<div>2190&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2191&emsp;&emsp;</div>
<div>2192&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2193&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Method for testing this class.</div>
<div>2194&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2195&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param argv should contain one element: the name of an ARFF file</div>
<div>2196&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2197&emsp;&emsp;&nbsp;&nbsp;  // @ requires argv != null;</div>
<div>2198&emsp;&emsp;&nbsp;&nbsp;  // @ requires argv.length == 1;</div>
<div>2199&emsp;&emsp;&nbsp;&nbsp;  // @ requires argv[0] != null;</div>
<div>2200&emsp;&emsp;&nbsp;&nbsp;  public static void test(String[] argv) {</div>
<div>2201&emsp;&emsp;</div>
<div>2202&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Instances instances, secondInstances, train, test, empty;</div>
<div>2203&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Random random = new Random(2);</div>
<div>2204&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    Reader reader;</div>
<div>2205&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int start, num;</div>
<div>2206&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;Attribute> testAtts;</div>
<div>2207&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    ArrayList&#60;String> testVals;</div>
<div>2208&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    int i, j;</div>
<div>2209&emsp;&emsp;</div>
<div>2210&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    try {</div>
<div>2211&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (argv.length > 1) {</div>
<div>2212&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        throw (new Exception("Usage: Instances [&#60;filename>]"));</div>
<div>2213&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2214&emsp;&emsp;</div>
<div>2215&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Creating set of instances from scratch</div>
<div>2216&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      testVals = new ArrayList&#60;String>(2);</div>
<div>2217&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      testVals.add("first_value");</div>
<div>2218&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      testVals.add("second_value");</div>
<div>2219&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      testAtts = new ArrayList&#60;Attribute>(2);</div>
<div>2220&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      testAtts.add(new Attribute("nominal_attribute", testVals));</div>
<div>2221&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      testAtts.add(new Attribute("numeric_attribute"));</div>
<div>2222&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instances = new Instances("test_set", testAtts, 10);</div>
<div>2223&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instances.add(new DenseInstance(instances.numAttributes()));</div>
<div>2224&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instances.add(new DenseInstance(instances.numAttributes()));</div>
<div>2225&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instances.add(new DenseInstance(instances.numAttributes()));</div>
<div>2226&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instances.setClassIndex(0);</div>
<div>2227&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nSet of instances created from scratch:\n");</div>
<div>2228&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(instances);</div>
<div>2229&emsp;&emsp;</div>
<div>2230&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (argv.length == 1) {</div>
<div>2231&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        String filename = argv[0];</div>
<div>2232&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        reader = new FileReader(filename);</div>
<div>2233&emsp;&emsp;</div>
<div>2234&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        // Read first five instances and print them</div>
<div>2235&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nFirst five instances from file:\n");</div>
<div>2236&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        instances = new Instances(reader, 1);</div>
<div>2237&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        instances.setClassIndex(instances.numAttributes() - 1);</div>
<div>2238&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        i = 0;</div>
<div>2239&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        while ((i &#60; 5) && (instances.readInstance(reader))) {</div>
<div>2240&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          i++;</div>
<div>2241&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>2242&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(instances);</div>
<div>2243&emsp;&emsp;</div>
<div>2244&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        // Read all the instances in the file</div>
<div>2245&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        reader = new FileReader(filename);</div>
<div>2246&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        instances = new Instances(reader);</div>
<div>2247&emsp;&emsp;</div>
<div>2248&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        // Make the last attribute be the class</div>
<div>2249&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        instances.setClassIndex(instances.numAttributes() - 1);</div>
<div>2250&emsp;&emsp;</div>
<div>2251&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        // Print header and instances.</div>
<div>2252&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nDataset:\n");</div>
<div>2253&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(instances);</div>
<div>2254&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nClass index: " + instances.classIndex());</div>
<div>2255&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2256&emsp;&emsp;</div>
<div>2257&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Test basic methods based on class index.</div>
<div>2258&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass name: " + instances.classAttribute().name());</div>
<div>2259&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass index: " + instances.classIndex());</div>
<div>2260&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass is nominal: "</div>
<div>2261&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + instances.classAttribute().isNominal());</div>
<div>2262&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass is numeric: "</div>
<div>2263&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + instances.classAttribute().isNumeric());</div>
<div>2264&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClasses:\n");</div>
<div>2265&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (i = 0; i &#60; instances.numClasses(); i++) {</div>
<div>2266&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(instances.classAttribute().value(i));</div>
<div>2267&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2268&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass values and labels of instances:\n");</div>
<div>2269&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (i = 0; i &#60; instances.numInstances(); i++) {</div>
<div>2270&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Instance inst = instances.instance(i);</div>
<div>2271&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.print(inst.classValue() + "\t");</div>
<div>2272&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.print(inst.toString(inst.classIndex()));</div>
<div>2273&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (instances.instance(i).classIsMissing()) {</div>
<div>2274&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          System.out.println("\tis missing");</div>
<div>2275&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        } else {</div>
<div>2276&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          System.out.println();</div>
<div>2277&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>2278&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2279&emsp;&emsp;</div>
<div>2280&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Create random weights.</div>
<div>2281&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nCreating random weights for instances.");</div>
<div>2282&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (i = 0; i &#60; instances.numInstances(); i++) {</div>
<div>2283&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        instances.instance(i).setWeight(random.nextDouble());</div>
<div>2284&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2285&emsp;&emsp;</div>
<div>2286&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Print all instances and their weights (and the sum of weights).</div>
<div>2287&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nInstances and their weights:\n");</div>
<div>2288&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(instances.instancesAndWeights());</div>
<div>2289&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.print("\nSum of weights: ");</div>
<div>2290&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(instances.sumOfWeights());</div>
<div>2291&emsp;&emsp;</div>
<div>2292&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Insert an attribute</div>
<div>2293&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      secondInstances = new Instances(instances);</div>
<div>2294&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Attribute testAtt = new Attribute("Inserted");</div>
<div>2295&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      secondInstances.insertAttributeAt(testAtt, 0);</div>
<div>2296&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nSet with inserted attribute:\n");</div>
<div>2297&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(secondInstances);</div>
<div>2298&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass name: "</div>
<div>2299&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + secondInstances.classAttribute().name());</div>
<div>2300&emsp;&emsp;</div>
<div>2301&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Delete the attribute</div>
<div>2302&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      secondInstances.deleteAttributeAt(0);</div>
<div>2303&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nSet with attribute deleted:\n");</div>
<div>2304&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(secondInstances);</div>
<div>2305&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass name: "</div>
<div>2306&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + secondInstances.classAttribute().name());</div>
<div>2307&emsp;&emsp;</div>
<div>2308&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Test if headers are equal</div>
<div>2309&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nHeaders equal: "</div>
<div>2310&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + instances.equalHeaders(secondInstances) + "\n");</div>
<div>2311&emsp;&emsp;</div>
<div>2312&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Print data in internal format.</div>
<div>2313&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nData (internal values):\n");</div>
<div>2314&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (i = 0; i &#60; instances.numInstances(); i++) {</div>
<div>2315&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        for (j = 0; j &#60; instances.numAttributes(); j++) {</div>
<div>2316&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          if (instances.instance(i).isMissing(j)) {</div>
<div>2317&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            System.out.print("? ");</div>
<div>2318&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          } else {</div>
<div>2319&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            System.out.print(instances.instance(i).value(j) + " ");</div>
<div>2320&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          }</div>
<div>2321&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>2322&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println();</div>
<div>2323&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2324&emsp;&emsp;</div>
<div>2325&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Just print header</div>
<div>2326&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nEmpty dataset:\n");</div>
<div>2327&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      empty = new Instances(instances, 0);</div>
<div>2328&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(empty);</div>
<div>2329&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass name: " + empty.classAttribute().name());</div>
<div>2330&emsp;&emsp;</div>
<div>2331&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Create copy and rename an attribute and a value (if possible)</div>
<div>2332&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (empty.classAttribute().isNominal()) {</div>
<div>2333&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Instances copy = new Instances(empty, 0);</div>
<div>2334&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        copy.renameAttribute(copy.classAttribute(), "new_name");</div>
<div>2335&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        copy.renameAttributeValue(copy.classAttribute(), copy.classAttribute()</div>
<div>2336&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          .value(0), "new_val_name");</div>
<div>2337&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nDataset with names changed:\n" + copy);</div>
<div>2338&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nOriginal dataset:\n" + empty);</div>
<div>2339&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2340&emsp;&emsp;</div>
<div>2341&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Create and prints subset of instances.</div>
<div>2342&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      start = instances.numInstances() / 4;</div>
<div>2343&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      num = instances.numInstances() / 2;</div>
<div>2344&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.print("\nSubset of dataset: ");</div>
<div>2345&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(num + " instances from " + (start + 1) + ". instance");</div>
<div>2346&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      secondInstances = new Instances(instances, start, num);</div>
<div>2347&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nClass name: "</div>
<div>2348&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        + secondInstances.classAttribute().name());</div>
<div>2349&emsp;&emsp;</div>
<div>2350&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Print all instances and their weights (and the sum of weights).</div>
<div>2351&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nInstances and their weights:\n");</div>
<div>2352&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(secondInstances.instancesAndWeights());</div>
<div>2353&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.print("\nSum of weights: ");</div>
<div>2354&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(secondInstances.sumOfWeights());</div>
<div>2355&emsp;&emsp;</div>
<div>2356&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Create and print training and test sets for 3-fold</div>
<div>2357&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // cross-validation.</div>
<div>2358&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nTrain and test folds for 3-fold CV:");</div>
<div>2359&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (instances.classAttribute().isNominal()) {</div>
<div>2360&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        instances.stratify(3);</div>
<div>2361&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2362&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      for (j = 0; j &#60; 3; j++) {</div>
<div>2363&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        train = instances.trainCV(3, j, new Random(1));</div>
<div>2364&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        test = instances.testCV(3, j);</div>
<div>2365&emsp;&emsp;</div>
<div>2366&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        // Print all instances and their weights (and the sum of weights).</div>
<div>2367&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nTrain: ");</div>
<div>2368&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nInstances and their weights:\n");</div>
<div>2369&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(train.instancesAndWeights());</div>
<div>2370&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.print("\nSum of weights: ");</div>
<div>2371&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(train.sumOfWeights());</div>
<div>2372&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nClass name: " + train.classAttribute().name());</div>
<div>2373&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nTest: ");</div>
<div>2374&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nInstances and their weights:\n");</div>
<div>2375&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(test.instancesAndWeights());</div>
<div>2376&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.print("\nSum of weights: ");</div>
<div>2377&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(test.sumOfWeights());</div>
<div>2378&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println("\nClass name: " + test.classAttribute().name());</div>
<div>2379&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2380&emsp;&emsp;</div>
<div>2381&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Randomize instances and print them.</div>
<div>2382&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nRandomized dataset:");</div>
<div>2383&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instances.randomize(random);</div>
<div>2384&emsp;&emsp;</div>
<div>2385&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Print all instances and their weights (and the sum of weights).</div>
<div>2386&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nInstances and their weights:\n");</div>
<div>2387&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(instances.instancesAndWeights());</div>
<div>2388&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.print("\nSum of weights: ");</div>
<div>2389&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(instances.sumOfWeights());</div>
<div>2390&emsp;&emsp;</div>
<div>2391&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Sort instances according to first attribute and</div>
<div>2392&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // print them.</div>
<div>2393&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.print("\nInstances sorted according to first attribute:\n ");</div>
<div>2394&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      instances.sort(0);</div>
<div>2395&emsp;&emsp;</div>
<div>2396&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // Print all instances and their weights (and the sum of weights).</div>
<div>2397&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println("\nInstances and their weights:\n");</div>
<div>2398&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(instances.instancesAndWeights());</div>
<div>2399&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.print("\nSum of weights: ");</div>
<div>2400&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.out.println(instances.sumOfWeights());</div>
<div>2401&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } catch (Exception e) {</div>
<div>2402&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      e.printStackTrace();</div>
<div>2403&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2404&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2405&emsp;&emsp;</div>
<div>2406&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2407&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Main method for this class. The following calls are possible:</div>
<div>2408&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;ul></div>
<div>2409&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;li></div>
<div>2410&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;code>weka.core.Instances&#60;/code> help&#60;br/></div>
<div>2411&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * prints a short list of possible commands.&#60;/li></div>
<div>2412&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;li></div>
<div>2413&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;code>weka.core.Instances&#60;/code> &lt;filename&gt;&#60;br/></div>
<div>2414&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * prints a summary of a set of instances.&#60;/li></div>
<div>2415&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;li></div>
<div>2416&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;code>weka.core.Instances&#60;/code> merge &lt;filename1&gt; &lt;filename2&gt;&#60;br/></div>
<div>2417&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * merges the two datasets (must have same number of instances) and outputs</div>
<div>2418&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * the results on stdout.&#60;/li></div>
<div>2419&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;li></div>
<div>2420&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;code>weka.core.Instances&#60;/code> append &lt;filename1&gt; &lt;filename2&gt;</div>
<div>2421&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;br/></div>
<div>2422&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * appends the second dataset to the first one (must have same headers) and</div>
<div>2423&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * outputs the results on stdout.&#60;/li></div>
<div>2424&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;li></div>
<div>2425&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;code>weka.core.Instances&#60;/code> headers &lt;filename1&gt;</div>
<div>2426&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &lt;filename2&gt;&#60;br/></div>
<div>2427&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Compares the headers of the two datasets and prints whether they match or</div>
<div>2428&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * not.&#60;/li></div>
<div>2429&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;li></div>
<div>2430&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;code>weka.core.Instances&#60;/code> randomize &lt;seed&gt; &lt;filename&gt;&#60;br/></div>
<div>2431&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * randomizes the dataset with the given seed and outputs the result on</div>
<div>2432&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * stdout.&#60;/li></div>
<div>2433&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * &#60;/ul></div>
<div>2434&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2435&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @param args the commandline parameters</div>
<div>2436&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2437&emsp;&emsp;&nbsp;&nbsp;  public static void main(String[] args) {</div>
<div>2438&emsp;&emsp;</div>
<div>2439&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    try {</div>
<div>2440&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Instances i;</div>
<div>2441&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // read from stdin and print statistics</div>
<div>2442&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      if (args.length == 0) {</div>
<div>2443&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source = new DataSource(System.in);</div>
<div>2444&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        i = source.getDataSet();</div>
<div>2445&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(i.toSummaryString());</div>
<div>2446&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2447&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // read file and print statistics</div>
<div>2448&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      else if ((args.length == 1) && (!args[0].equals("-h"))</div>
<div>2449&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        && (!args[0].equals("help"))) {</div>
<div>2450&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source = new DataSource(args[0]);</div>
<div>2451&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        i = source.getDataSet();</div>
<div>2452&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(i.toSummaryString());</div>
<div>2453&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2454&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // read two files, merge them and print result to stdout</div>
<div>2455&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      else if ((args.length == 3) && (args[0].toLowerCase().equals("merge"))) {</div>
<div>2456&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source1 = new DataSource(args[1]);</div>
<div>2457&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source2 = new DataSource(args[2]);</div>
<div>2458&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        i = Instances</div>
<div>2459&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          .mergeInstances(source1.getDataSet(), source2.getDataSet());</div>
<div>2460&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(i);</div>
<div>2461&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2462&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // read two files, append them and print result to stdout</div>
<div>2463&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      else if ((args.length == 3) && (args[0].toLowerCase().equals("append"))) {</div>
<div>2464&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source1 = new DataSource(args[1]);</div>
<div>2465&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source2 = new DataSource(args[2]);</div>
<div>2466&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        String msg = source1.getStructure().equalHeadersMsg(</div>
<div>2467&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          source2.getStructure());</div>
<div>2468&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (msg != null) {</div>
<div>2469&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          throw new Exception("The two datasets have different headers:\n"</div>
<div>2470&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            + msg);</div>
<div>2471&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>2472&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Instances structure = source1.getStructure();</div>
<div>2473&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(source1.getStructure());</div>
<div>2474&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        while (source1.hasMoreElements(structure)) {</div>
<div>2475&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          System.out.println(source1.nextElement(structure));</div>
<div>2476&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>2477&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        structure = source2.getStructure();</div>
<div>2478&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        while (source2.hasMoreElements(structure)) {</div>
<div>2479&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          System.out.println(source2.nextElement(structure));</div>
<div>2480&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>2481&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2482&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // read two files and compare their headers</div>
<div>2483&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      else if ((args.length == 3) && (args[0].toLowerCase().equals("headers"))) {</div>
<div>2484&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source1 = new DataSource(args[1]);</div>
<div>2485&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source2 = new DataSource(args[2]);</div>
<div>2486&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        String msg = source1.getStructure().equalHeadersMsg(</div>
<div>2487&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          source2.getStructure());</div>
<div>2488&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        if (msg == null) {</div>
<div>2489&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          System.out.println("Headers match");</div>
<div>2490&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        } else {</div>
<div>2491&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          System.out.println("Headers don't match:\n" + msg);</div>
<div>2492&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        }</div>
<div>2493&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2494&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // read file and seed value, randomize data and print result to stdout</div>
<div>2495&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      else if ((args.length == 3)</div>
<div>2496&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        && (args[0].toLowerCase().equals("randomize"))) {</div>
<div>2497&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        DataSource source = new DataSource(args[2]);</div>
<div>2498&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        i = source.getDataSet();</div>
<div>2499&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        i.randomize(new Random(Integer.parseInt(args[1])));</div>
<div>2500&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.out.println(i);</div>
<div>2501&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2502&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // wrong parameters or help</div>
<div>2503&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      else {</div>
<div>2504&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        System.err</div>
<div>2505&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        .println("\nUsage:\n"</div>
<div>2506&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // help</div>
<div>2507&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\tweka.core.Instances help\n"</div>
<div>2508&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tPrints this help\n"</div>
<div>2509&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // stats</div>
<div>2510&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\tweka.core.Instances &#60;filename>\n"</div>
<div>2511&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tOutputs dataset statistics\n"</div>
<div>2512&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // merge</div>
<div>2513&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\tweka.core.Instances merge &#60;filename1> &#60;filename2>\n"</div>
<div>2514&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tMerges the datasets (must have same number of rows).\n"</div>
<div>2515&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tGenerated dataset gets output on stdout.\n"</div>
<div>2516&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // append</div>
<div>2517&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\tweka.core.Instances append &#60;filename1> &#60;filename2>\n"</div>
<div>2518&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tAppends the second dataset to the first (must have same number of attributes).\n"</div>
<div>2519&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tGenerated dataset gets output on stdout.\n"</div>
<div>2520&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // headers</div>
<div>2521&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\tweka.core.Instances headers &#60;filename1> &#60;filename2>\n"</div>
<div>2522&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tCompares the structure of the two datasets and outputs whether they\n"</div>
<div>2523&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tdiffer or not.\n"</div>
<div>2524&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          // randomize</div>
<div>2525&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\tweka.core.Instances randomize &#60;seed> &#60;filename>\n"</div>
<div>2526&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          + "\t\tRandomizes the dataset and outputs it on stdout.\n");</div>
<div>2527&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      }</div>
<div>2528&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    } catch (Exception ex) {</div>
<div>2529&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      ex.printStackTrace();</div>
<div>2530&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      System.err.println(ex.getMessage());</div>
<div>2531&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    }</div>
<div>2532&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2533&emsp;&emsp;</div>
<div>2534&emsp;&emsp;&nbsp;&nbsp;  /**</div>
<div>2535&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * Returns the revision string.</div>
<div>2536&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * </div>
<div>2537&emsp;&emsp;&nbsp;&nbsp;&nbsp;   * @return the revision</div>
<div>2538&emsp;&emsp;&nbsp;&nbsp;&nbsp;   */</div>
<div>2539&emsp;&emsp;&nbsp;&nbsp;  @Override</div>
<div>2540&emsp;&emsp;&nbsp;&nbsp;  public String getRevision() {</div>
<div>2541&emsp;&emsp;&nbsp;&nbsp;&nbsp;&nbsp;    return RevisionUtils.extract("$Revision: 12446 $");</div>
<div>2542&emsp;&emsp;&nbsp;&nbsp;  }</div>
<div>2543&emsp;&emsp;}</div>
</div>
</div>
</body>
</html>