digraph <init> {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1774939738}" -> "snapshotSerializers := @parameter0: java.util.Map {1283976547}";
"snapshotSerializers := @parameter0: java.util.Map {1283976547}" -> "primarySnapshotSuffix := @parameter1: java.lang.String {203020866}";
"primarySnapshotSuffix := @parameter1: java.lang.String {203020866}" -> "newPrevalentSystem := @parameter2: java.lang.Object {464417042}";
"newPrevalentSystem := @parameter2: java.lang.Object {464417042}" -> "directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1909382681}";
"directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {1909382681}" -> "journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {2055105890}";
"journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {2055105890}" -> "specialinvoke this.<java.lang.Object: void <init>()>() {1730389354}";
"specialinvoke this.<java.lang.Object: void <init>()>() {1730389354}" -> "$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {1186344512}";
"$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {1186344512}" -> "iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1252947039}";
"iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1252947039}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1717293389}";
"$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1717293389}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {505747732}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {505747732}" -> "if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1347345381}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1347345381}" -> "$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {948719043}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1347345381}" -> "$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1116292086}";
"$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {948719043}" -> "suffix = (java.lang.String) $r1 {361959280}";
"suffix = (java.lang.String) $r1 {361959280}" -> "staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1727452549}";
"staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1727452549}" -> "goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {1385278023}";
"goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {1385278023}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1717293389}";
"$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {1116292086}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {724514025}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {724514025}" -> "if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {993761226}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {993761226}" -> "$r2 = new java.lang.IllegalArgumentException {200153752}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {993761226}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {729903845}";
"$r2 = new java.lang.IllegalArgumentException {200153752}" -> "$r3 = new java.lang.StringBuilder {1371422054}";
"$r3 = new java.lang.StringBuilder {1371422054}" -> "specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1368150162}";
"specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1368150162}" -> "$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {636097723}";
"$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {636097723}" -> "$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {1402922554}";
"$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {1402922554}" -> "$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {535973869}";
"$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {535973869}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {1443707053}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {1443707053}" -> "specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1913039712}";
"specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1913039712}" -> "throw $r2 {1592568378}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {729903845}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {325539751}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {325539751}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {854858939}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {854858939}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {547786624}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {547786624}" -> "virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1377820249}";
"virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1377820249}" -> "$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1724129436}";
"$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1724129436}" -> "latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {2122103232}";
"latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {2122103232}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {560093089}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {560093089}" -> "if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {412798982}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {412798982}" -> "$l0 = 0L {447864564}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {412798982}" -> "$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {736221141}";
"$l0 = 0L {447864564}" -> "goto [?= recoveredVersion = $l0] {26789595}";
"goto [?= recoveredVersion = $l0] {26789595}" -> "recoveredVersion = $l0 {2027576592}";
"$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {736221141}" -> "recoveredVersion = $l0 {2027576592}";
"recoveredVersion = $l0 {2027576592}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1766729868}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1766729868}" -> "if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {299226168}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {299226168}" -> "$r10 = newPrevalentSystem {832001731}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {299226168}" -> "$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1687867720}";
"$r10 = newPrevalentSystem {832001731}" -> "goto [?= recoveredPrevalentSystem = $r10] {454016828}";
"goto [?= recoveredPrevalentSystem = $r10] {454016828}" -> "recoveredPrevalentSystem = $r10 {213360304}";
"$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1687867720}" -> "recoveredPrevalentSystem = $r10 {213360304}";
"recoveredPrevalentSystem = $r10 {213360304}" -> "$r11 = new org.prevayler.implementation.PrevalentSystemGuard {1414955193}";
"$r11 = new org.prevayler.implementation.PrevalentSystemGuard {1414955193}" -> "specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {1797756637}";
"specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {1797756637}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {1231138102}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {1231138102}" -> "return {208791919}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {560093089}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1766729868}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {505747732}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {724514025}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph readSnapshot {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {918673196}" -> "snapshotFile := @parameter0: java.io.File {606890498}";
"snapshotFile := @parameter0: java.io.File {606890498}" -> "$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {680787416}";
"$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {680787416}" -> "$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1374780600}";
"$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1374780600}" -> "$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {1955391557}";
"$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {1955391557}" -> "$i1 = $i0 + 1 {301301077}";
"$i1 = $i0 + 1 {301301077}" -> "suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {69195178}";
"suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {69195178}" -> "$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1141910343}";
"$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1141910343}" -> "$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1057703660}";
"$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1057703660}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1042486200}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1042486200}" -> "if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1361199603}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1361199603}" -> "$r3 = new java.io.IOException {346882691}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1361199603}" -> "$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1372790702}";
"$r3 = new java.io.IOException {346882691}" -> "$r4 = new java.lang.StringBuilder {799193817}";
"$r4 = new java.lang.StringBuilder {799193817}" -> "specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {120557331}";
"specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {120557331}" -> "$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {863725957}";
"$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {863725957}" -> "$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1812267952}";
"$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1812267952}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {649266925}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {649266925}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {170980865}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {170980865}" -> "$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {1463140765}";
"$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {1463140765}" -> "$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {1770992120}";
"$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {1770992120}" -> "$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1156185002}";
"$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1156185002}" -> "$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {816088128}";
"$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {816088128}" -> "$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {540308317}";
"$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {540308317}" -> "specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {730593370}";
"specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {730593370}" -> "throw $r3 {1189882430}";
"$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1372790702}" -> "$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {41162687}";
"$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {41162687}" -> "serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {1045439889}";
"serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {1045439889}" -> "$r16 = new java.io.FileInputStream {473629707}";
"$r16 = new java.io.FileInputStream {473629707}" -> "specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {1346599327}";
"specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {1346599327}" -> "in = $r16 {1407590952}";
"in = $r16 {1407590952}" -> "l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {1768660965}";
"l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {1768660965}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {1680640491}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {1680640491}" -> "return l5 {1963558197}";
"$r17 := @caughtexception {634038317}" -> "l6 = $r17 {209605461}";
"l6 = $r17 {209605461}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {809057066}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {809057066}" -> "throw l6 {760881671}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1042486200}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph recoveredPrevalentSystem {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {851062309}" -> "$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {1764406884}";
"$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {1764406884}" -> "return $r0 {176318050}";
}


