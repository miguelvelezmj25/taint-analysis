digraph <init> {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {699533161}" -> "snapshotSerializers := @parameter0: java.util.Map {975915409}";
"snapshotSerializers := @parameter0: java.util.Map {975915409}" -> "primarySnapshotSuffix := @parameter1: java.lang.String {2102932763}";
"primarySnapshotSuffix := @parameter1: java.lang.String {2102932763}" -> "newPrevalentSystem := @parameter2: java.lang.Object {598785408}";
"newPrevalentSystem := @parameter2: java.lang.Object {598785408}" -> "directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {474672859}";
"directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {474672859}" -> "journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {1096882457}";
"journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {1096882457}" -> "specialinvoke this.<java.lang.Object: void <init>()>() {624640927}";
"specialinvoke this.<java.lang.Object: void <init>()>() {624640927}" -> "$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {2005266149}";
"$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {2005266149}" -> "iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1427628687}";
"iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1427628687}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1633636644}";
"$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1633636644}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {508362363}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {508362363}" -> "if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {916455466}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {916455466}" -> "$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {1073182144}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {916455466}" -> "$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {212872095}";
"$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {1073182144}" -> "suffix = (java.lang.String) $r1 {34325487}";
"suffix = (java.lang.String) $r1 {34325487}" -> "staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1949655847}";
"staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {1949655847}" -> "goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {258462887}";
"goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {258462887}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1633636644}";
"$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {212872095}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {750191166}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {750191166}" -> "if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {610752404}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {610752404}" -> "$r2 = new java.lang.IllegalArgumentException {1174171799}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {610752404}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1533334280}";
"$r2 = new java.lang.IllegalArgumentException {1174171799}" -> "$r3 = new java.lang.StringBuilder {1932380213}";
"$r3 = new java.lang.StringBuilder {1932380213}" -> "specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1368146775}";
"specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1368146775}" -> "$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {40927661}";
"$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {40927661}" -> "$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {1148359418}";
"$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {1148359418}" -> "$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1685785486}";
"$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1685785486}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {745098428}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {745098428}" -> "specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {2086469257}";
"specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {2086469257}" -> "throw $r2 {447102555}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1533334280}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1130672957}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1130672957}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {255957283}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {255957283}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {2030695640}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {2030695640}" -> "virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1977995200}";
"virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {1977995200}" -> "$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1316601832}";
"$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1316601832}" -> "latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {596144730}";
"latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {596144730}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {620501096}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {620501096}" -> "if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1509580947}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1509580947}" -> "$l0 = 0L {2043468738}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1509580947}" -> "$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1535043772}";
"$l0 = 0L {2043468738}" -> "goto [?= recoveredVersion = $l0] {431389699}";
"goto [?= recoveredVersion = $l0] {431389699}" -> "recoveredVersion = $l0 {1854869539}";
"$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {1535043772}" -> "recoveredVersion = $l0 {1854869539}";
"recoveredVersion = $l0 {1854869539}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {451638724}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {451638724}" -> "if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1144248928}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1144248928}" -> "$r10 = newPrevalentSystem {424385990}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1144248928}" -> "$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1598313996}";
"$r10 = newPrevalentSystem {424385990}" -> "goto [?= recoveredPrevalentSystem = $r10] {257136836}";
"goto [?= recoveredPrevalentSystem = $r10] {257136836}" -> "recoveredPrevalentSystem = $r10 {2131965093}";
"$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1598313996}" -> "recoveredPrevalentSystem = $r10 {2131965093}";
"recoveredPrevalentSystem = $r10 {2131965093}" -> "$r11 = new org.prevayler.implementation.PrevalentSystemGuard {980416887}";
"$r11 = new org.prevayler.implementation.PrevalentSystemGuard {980416887}" -> "specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {2034172265}";
"specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {2034172265}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {431897315}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {431897315}" -> "return {827592410}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {451638724}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {620501096}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {508362363}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {750191166}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph readSnapshot {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1957840916}" -> "snapshotFile := @parameter0: java.io.File {2103106653}";
"snapshotFile := @parameter0: java.io.File {2103106653}" -> "$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {538275326}";
"$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {538275326}" -> "$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1293488368}";
"$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1293488368}" -> "$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {2113286576}";
"$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {2113286576}" -> "$i1 = $i0 + 1 {2037762109}";
"$i1 = $i0 + 1 {2037762109}" -> "suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {784393270}";
"suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {784393270}" -> "$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1313918905}";
"$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1313918905}" -> "$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {571283363}";
"$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {571283363}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {251774719}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {251774719}" -> "if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1147626092}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1147626092}" -> "$r3 = new java.io.IOException {201474142}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1147626092}" -> "$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {2029260230}";
"$r3 = new java.io.IOException {201474142}" -> "$r4 = new java.lang.StringBuilder {1619445871}";
"$r4 = new java.lang.StringBuilder {1619445871}" -> "specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {1219656626}";
"specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {1219656626}" -> "$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {1825481620}";
"$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {1825481620}" -> "$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1967936626}";
"$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1967936626}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {947130105}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {947130105}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {910682097}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {910682097}" -> "$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {1579361125}";
"$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {1579361125}" -> "$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {1178140062}";
"$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {1178140062}" -> "$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {429609457}";
"$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {429609457}" -> "$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {1469408319}";
"$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {1469408319}" -> "$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1447081822}";
"$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {1447081822}" -> "specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {362246334}";
"specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {362246334}" -> "throw $r3 {1461028853}";
"$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {2029260230}" -> "$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {756654053}";
"$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {756654053}" -> "serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {565197890}";
"serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {565197890}" -> "$r16 = new java.io.FileInputStream {1085765926}";
"$r16 = new java.io.FileInputStream {1085765926}" -> "specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {756992169}";
"specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {756992169}" -> "in = $r16 {420696528}";
"in = $r16 {420696528}" -> "l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {853426454}";
"l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {853426454}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {937785616}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {937785616}" -> "return l5 {1279047163}";
"$r17 := @caughtexception {60540678}" -> "l6 = $r17 {515470642}";
"l6 = $r17 {515470642}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {1869475179}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {1869475179}" -> "throw l6 {2112611631}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {251774719}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph recoveredPrevalentSystem {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1346524664}" -> "$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {469409186}";
"$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {469409186}" -> "return $r0 {1507190448}";
}


