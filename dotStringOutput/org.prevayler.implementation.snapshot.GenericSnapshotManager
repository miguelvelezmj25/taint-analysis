digraph <init> {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1835833833}" -> "snapshotSerializers := @parameter0: java.util.Map {492221821}";
"snapshotSerializers := @parameter0: java.util.Map {492221821}" -> "primarySnapshotSuffix := @parameter1: java.lang.String {1529162097}";
"primarySnapshotSuffix := @parameter1: java.lang.String {1529162097}" -> "newPrevalentSystem := @parameter2: java.lang.Object {1486398971}";
"newPrevalentSystem := @parameter2: java.lang.Object {1486398971}" -> "directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {44824999}";
"directory := @parameter3: org.prevayler.implementation.PrevaylerDirectory {44824999}" -> "journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {118110329}";
"journalSerializer := @parameter4: org.prevayler.foundation.serialization.Serializer {118110329}" -> "specialinvoke this.<java.lang.Object: void <init>()>() {238867466}";
"specialinvoke this.<java.lang.Object: void <init>()>() {238867466}" -> "$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {696455853}";
"$r0 = interfaceinvoke snapshotSerializers.<java.util.Map: java.util.Set keySet()>() {696455853}" -> "iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1998555894}";
"iterator = interfaceinvoke $r0.<java.util.Set: java.util.Iterator iterator()>() {1998555894}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1995597833}";
"$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1995597833}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1655826191}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1655826191}" -> "if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {236457283}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {236457283}" -> "$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {69527757}";
"if $z0 == 0 goto $z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {236457283}" -> "$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {81847230}";
"$r1 = interfaceinvoke iterator.<java.util.Iterator: java.lang.Object next()>() {69527757}" -> "suffix = (java.lang.String) $r1 {1907925939}";
"suffix = (java.lang.String) $r1 {1907925939}" -> "staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {681811852}";
"staticinvoke <org.prevayler.implementation.PrevaylerDirectory: void checkValidSnapshotSuffix(java.lang.String)>(suffix) {681811852}" -> "goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {2134088897}";
"goto [?= $z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>()] {2134088897}" -> "$z0 = interfaceinvoke iterator.<java.util.Iterator: boolean hasNext()>() {1995597833}";
"$z1 = interfaceinvoke snapshotSerializers.<java.util.Map: boolean containsKey(java.lang.Object)>(primarySnapshotSuffix) {81847230}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {305555015}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {305555015}" -> "if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1601489400}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1601489400}" -> "$r2 = new java.lang.IllegalArgumentException {1691509551}";
"if $z1 != 0 goto this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1601489400}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1447199665}";
"$r2 = new java.lang.IllegalArgumentException {1691509551}" -> "$r3 = new java.lang.StringBuilder {1276781489}";
"$r3 = new java.lang.StringBuilder {1276781489}" -> "specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1341093732}";
"specialinvoke $r3.<java.lang.StringBuilder: void <init>()>() {1341093732}" -> "$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {1586459649}";
"$r4 = virtualinvoke $r3.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"Primary suffix \'\") {1586459649}" -> "$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {1048998032}";
"$r5 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(primarySnapshotSuffix) {1048998032}" -> "$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1729206071}";
"$r6 = virtualinvoke $r5.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\"\' does not appear in strategies map\") {1729206071}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {1582919840}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.String toString()>() {1582919840}" -> "specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1398184203}";
"specialinvoke $r2.<java.lang.IllegalArgumentException: void <init>(java.lang.String)>($r7) {1398184203}" -> "throw $r2 {1337060604}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> = snapshotSerializers {1447199665}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1317471845}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.String _primarySuffix> = primarySnapshotSuffix {1317471845}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {331435000}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> = directory {331435000}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {991936071}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {991936071}" -> "virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {935198419}";
"virtualinvoke $r8.<org.prevayler.implementation.PrevaylerDirectory: void produceDirectory()>() {935198419}" -> "$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1432157904}";
"$r9 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevaylerDirectory _directory> {1432157904}" -> "latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {843951135}";
"latestSnapshot = virtualinvoke $r9.<org.prevayler.implementation.PrevaylerDirectory: java.io.File latestSnapshot()>() {843951135}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1253834244}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1253834244}" -> "if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {804268807}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {804268807}" -> "$l0 = 0L {1106862512}";
"if latestSnapshot != null goto $l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {804268807}" -> "$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {453255927}";
"$l0 = 0L {1106862512}" -> "goto [?= recoveredVersion = $l0] {504037572}";
"goto [?= recoveredVersion = $l0] {504037572}" -> "recoveredVersion = $l0 {1471224605}";
"$l0 = staticinvoke <org.prevayler.implementation.PrevaylerDirectory: long snapshotVersion(java.io.File)>(latestSnapshot) {453255927}" -> "recoveredVersion = $l0 {1471224605}";
"recoveredVersion = $l0 {1471224605}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1682487804}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1682487804}" -> "if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1279355167}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1279355167}" -> "$r10 = newPrevalentSystem {215857221}";
"if latestSnapshot != null goto $r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1279355167}" -> "$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1157049814}";
"$r10 = newPrevalentSystem {215857221}" -> "goto [?= recoveredPrevalentSystem = $r10] {1407922992}";
"goto [?= recoveredPrevalentSystem = $r10] {1407922992}" -> "recoveredPrevalentSystem = $r10 {360721404}";
"$r10 = specialinvoke this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.lang.Object readSnapshot(java.io.File)>(latestSnapshot) {1157049814}" -> "recoveredPrevalentSystem = $r10 {360721404}";
"recoveredPrevalentSystem = $r10 {360721404}" -> "$r11 = new org.prevayler.implementation.PrevalentSystemGuard {3188777}";
"$r11 = new org.prevayler.implementation.PrevalentSystemGuard {3188777}" -> "specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {1166295177}";
"specialinvoke $r11.<org.prevayler.implementation.PrevalentSystemGuard: void <init>(java.lang.Object,long,org.prevayler.foundation.serialization.Serializer)>(recoveredPrevalentSystem, recoveredVersion, journalSerializer) {1166295177}" -> "this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {355759327}";
"this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> = $r11 {355759327}" -> "return {609383714}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1682487804}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>(latestSnapshot) {1253834244}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z1) {305555015}"[fontcolor="blue", penwidth=3, color="blue"];
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1655826191}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph readSnapshot {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {569587531}" -> "snapshotFile := @parameter0: java.io.File {1423359774}";
"snapshotFile := @parameter0: java.io.File {1423359774}" -> "$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1440065613}";
"$r0 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {1440065613}" -> "$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {98810871}";
"$r1 = virtualinvoke snapshotFile.<java.io.File: java.lang.String getName()>() {98810871}" -> "$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {1130774881}";
"$i0 = virtualinvoke $r1.<java.lang.String: int indexOf(int)>(46) {1130774881}" -> "$i1 = $i0 + 1 {1093847947}";
"$i1 = $i0 + 1 {1093847947}" -> "suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {730920276}";
"suffix = virtualinvoke $r0.<java.lang.String: java.lang.String substring(int)>($i1) {730920276}" -> "$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1713555303}";
"$r2 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1713555303}" -> "$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1082131780}";
"$z0 = interfaceinvoke $r2.<java.util.Map: boolean containsKey(java.lang.Object)>(suffix) {1082131780}" -> "staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1029140874}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1029140874}" -> "if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1953767575}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1953767575}" -> "$r3 = new java.io.IOException {77453441}";
"if $z0 != 0 goto $r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1953767575}" -> "$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1938228875}";
"$r3 = new java.io.IOException {77453441}" -> "$r4 = new java.lang.StringBuilder {453000070}";
"$r4 = new java.lang.StringBuilder {453000070}" -> "specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {705605019}";
"specialinvoke $r4.<java.lang.StringBuilder: void <init>()>() {705605019}" -> "$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {1342849855}";
"$r5 = virtualinvoke snapshotFile.<java.io.File: java.lang.String toString()>() {1342849855}" -> "$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1175055602}";
"$r6 = virtualinvoke $r4.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r5) {1175055602}" -> "$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {1786053995}";
"$r7 = virtualinvoke $r6.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" cannot be read; only \") {1786053995}" -> "$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1627635491}";
"$r8 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1627635491}" -> "$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {1595343557}";
"$r9 = interfaceinvoke $r8.<java.util.Map: java.util.Set keySet()>() {1595343557}" -> "$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {495655441}";
"$r10 = virtualinvoke $r9.<java.lang.Object: java.lang.String toString()>() {495655441}" -> "$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1353175209}";
"$r11 = virtualinvoke $r7.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>($r10) {1353175209}" -> "$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {1262987602}";
"$r12 = virtualinvoke $r11.<java.lang.StringBuilder: java.lang.StringBuilder append(java.lang.String)>(\" supported\") {1262987602}" -> "$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {240740793}";
"$r13 = virtualinvoke $r12.<java.lang.StringBuilder: java.lang.String toString()>() {240740793}" -> "specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {1612042819}";
"specialinvoke $r3.<java.io.IOException: void <init>(java.lang.String)>($r13) {1612042819}" -> "throw $r3 {1076726071}";
"$r14 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: java.util.Map _strategies> {1938228875}" -> "$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {293996493}";
"$r15 = interfaceinvoke $r14.<java.util.Map: java.lang.Object get(java.lang.Object)>(suffix) {293996493}" -> "serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {380358868}";
"serializer = (org.prevayler.foundation.serialization.Serializer) $r15 {380358868}" -> "$r16 = new java.io.FileInputStream {926025123}";
"$r16 = new java.io.FileInputStream {926025123}" -> "specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {1944027013}";
"specialinvoke $r16.<java.io.FileInputStream: void <init>(java.io.File)>(snapshotFile) {1944027013}" -> "in = $r16 {564612108}";
"in = $r16 {564612108}" -> "l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {371943738}";
"l5 = interfaceinvoke serializer.<org.prevayler.foundation.serialization.Serializer: java.lang.Object readObject(java.io.InputStream)>(in) {371943738}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {1836071257}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {1836071257}" -> "return l5 {1440207256}";
"$r17 := @caughtexception {432712169}" -> "l6 = $r17 {811440465}";
"l6 = $r17 {811440465}" -> "virtualinvoke in.<java.io.FileInputStream: void close()>() {50712936}";
"virtualinvoke in.<java.io.FileInputStream: void close()>() {50712936}" -> "throw l6 {1561104017}";
"staticinvoke <edu.cmu.cs.mvelezce.analysis.option.Sink: void sink(java.lang.Object)>($z0) {1029140874}"[fontcolor="blue", penwidth=3, color="blue"];
}

digraph recoveredPrevalentSystem {
"this := @this: org.prevayler.implementation.snapshot.GenericSnapshotManager {1953755719}" -> "$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {2144654042}";
"$r0 = this.<org.prevayler.implementation.snapshot.GenericSnapshotManager: org.prevayler.implementation.PrevalentSystemGuard _recoveredPrevalentSystem> {2144654042}" -> "return $r0 {341767853}";
}


